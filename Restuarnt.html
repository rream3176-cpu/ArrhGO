<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArhGo | Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/arhgo.css">
  <script src="assets/js/arhgo.js" defer></script>
  <script src="assets/js/booking-system.js" defer></script>
  <style>
    body {
      background: var(--bg-primary);
      padding-top: 80px;
    }
    
    /* ØªØ­Ø³ÙŠÙ† Ù„ÙˆØ­Ø© Ø§Ù„Ø¨Ø­Ø« - ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ */
    .search-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-md);
    }
    
    .search-panel .field {
      margin-bottom: 0;
    }
    
    .search-panel .field label {
      font-size: 0.85rem;
      margin-bottom: 6px;
    }
    
    .search-panel .arhgo-input,
    .search-panel .arhgo-select {
      width: 100%;
      padding: 10px 14px;
      font-size: 0.9rem;
      color: var(--text-primary) !important;
      background: linear-gradient(135deg, rgba(11, 15, 26, 0.8) 0%, rgba(15, 22, 36, 0.9) 100%) !important;
    }
    
    .search-panel .arhgo-input:focus {
      background: linear-gradient(135deg, rgba(30, 40, 60, 0.95) 0%, rgba(35, 45, 70, 1) 100%) !important;
      border-color: rgba(0, 229, 255, 0.4) !important;
    }
    
    .search-panel .arhgo-select:focus {
      background: linear-gradient(135deg, rgba(30, 40, 60, 0.95) 0%, rgba(35, 45, 70, 1) 100%) !important;
      border-color: rgba(0, 229, 255, 0.4) !important;
    }
    
    .search-panel .arhgo-select option {
      background: rgba(30, 40, 60, 0.95) !important;
      color: var(--text-primary) !important;
      padding: 12px;
    }
    
    .search-panel .arhgo-select option:checked,
    .search-panel .arhgo-select option:hover {
      background: rgba(0, 229, 255, 0.3) !important;
      color: var(--neon-cyan) !important;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­ Ø£Ù„ÙˆØ§Ù† autocomplete dropdowns */
    .search-panel .arhgo-input::-webkit-autofill,
    .search-panel .arhgo-input::-webkit-autofill:hover,
    .search-panel .arhgo-input::-webkit-autofill:focus {
      -webkit-text-fill-color: var(--text-primary) !important;
      -webkit-box-shadow: 0 0 0px 1000px rgba(30, 40, 60, 0.95) inset !important;
      background: linear-gradient(135deg, rgba(30, 40, 60, 0.95) 0%, rgba(35, 45, 70, 1) 100%) !important;
      border-color: rgba(0, 229, 255, 0.4) !important;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­ Ø£Ù„ÙˆØ§Ù† datalist dropdown */
    .search-panel datalist option {
      background: rgba(30, 40, 60, 0.95) !important;
      color: var(--text-primary) !important;
      padding: 12px;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­ placeholder text */
    .search-panel .arhgo-input::placeholder {
      color: var(--text-muted) !important;
      opacity: 0.7 !important;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­ Ù‚Ø§Ø¦Ù…Ø© autocomplete Ù„Ù„Ù…ØªØµÙØ­Ø§Øª */
    .search-panel .arhgo-input::-webkit-contacts-auto-fill-button,
    .search-panel .arhgo-input::-webkit-credentials-auto-fill-button {
      background-color: rgba(30, 40, 60, 0.95) !important;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­ Ù‚Ø§Ø¦Ù…Ø© autocomplete ÙÙŠ Firefox */
    .search-panel .arhgo-input:-moz-autofill {
      background-color: rgba(30, 40, 60, 0.95) !important;
      color: var(--text-primary) !important;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­ Ù‚Ø§Ø¦Ù…Ø© autocomplete ÙÙŠ Edge/Chrome */
    .search-panel .arhgo-input:-webkit-autofill {
      -webkit-box-shadow: 0 0 0 1000px rgba(30, 40, 60, 0.95) inset !important;
      -webkit-text-fill-color: var(--text-primary) !important;
      background-color: rgba(30, 40, 60, 0.95) !important;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª (suggestions list) */
    input[list]::-webkit-calendar-picker-indicator {
      filter: invert(1);
      opacity: 0.7;
    }
    
    /* Ø¥ØµÙ„Ø§Ø­ Ù„ÙˆÙ† Ø§Ù„Ù†Øµ ÙÙŠ input */
    .search-panel .arhgo-input {
      color: var(--text-primary) !important;
      background-color: transparent !important;
    }
    
    .search-panel .arhgo-input:-webkit-autofill,
    .search-panel .arhgo-input:-webkit-autofill:hover,
    .search-panel .arhgo-input:-webkit-autofill:focus,
    .search-panel .arhgo-input:-webkit-autofill:active {
      -webkit-text-fill-color: var(--text-primary) !important;
      -webkit-box-shadow: 0 0 0px 1000px rgba(30, 40, 60, 0.95) inset !important;
      transition: background-color 5000s ease-in-out 0s;
      background-color: rgba(30, 40, 60, 0.95) !important;
    }
    
    /* Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Saved info Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ */
    .search-panel .arhgo-input::-webkit-credentials-auto-fill-button,
    .search-panel .arhgo-input::-webkit-contacts-auto-fill-button {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
    
    /* Ù…Ù†Ø¹ Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© autocomplete Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
    .search-panel .arhgo-input {
      -webkit-autofill-predictions: none !important;
    }
    
    /* Ø¥Ø®ÙØ§Ø¡ Ø£ÙŠ popup Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ */
    .search-panel .arhgo-input::before,
    .search-panel .arhgo-input::after {
      display: none !important;
    }
    
    .glass-card {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    /* ØªØ­Ø³ÙŠÙ† Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¹Ù… */
    #list.grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: var(--spacing-lg);
      margin-top: var(--spacing-xl);
    }
    
    .restaurant-card {
      border-radius: var(--radius-lg);
      padding: var(--spacing-xl);
      background: linear-gradient(135deg, rgba(20, 27, 45, 0.8) 0%, rgba(15, 22, 36, 0.9) 100%);
      backdrop-filter: blur(30px) saturate(200%);
      -webkit-backdrop-filter: blur(30px) saturate(200%);
      border: 1px solid rgba(0, 229, 255, 0.2);
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(0, 229, 255, 0.1),
        inset 0 1px 1px rgba(255, 255, 255, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .restaurant-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(0, 229, 255, 0.6) 20%, 
        rgba(0, 207, 200, 0.6) 50%, 
        rgba(0, 229, 255, 0.6) 80%, 
        transparent 100%);
      opacity: 0;
      transition: opacity 0.4s ease;
    }
    
    .restaurant-card:hover {
      transform: translateY(-6px);
      box-shadow: 
        0 30px 80px rgba(0, 0, 0, 0.5),
        0 0 60px rgba(0, 229, 255, 0.3),
        inset 0 1px 1px rgba(255, 255, 255, 0.15);
      border-color: rgba(0, 229, 255, 0.5);
    }
    
    .restaurant-card:hover::before {
      opacity: 1;
    }
    
    .restaurant-card h3 {
      margin: 0 0 var(--spacing-sm) 0;
      color: var(--neon-cyan);
      font-size: 1.5rem;
      font-weight: 700;
      line-height: 1.3;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .restaurant-card > p:first-of-type {
      color: var(--text-secondary);
      font-size: 0.95rem;
      margin-bottom: var(--spacing-sm);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .restaurant-card > p:last-of-type {
      color: var(--text-secondary);
      line-height: 1.6;
      margin: var(--spacing-md) 0;
      font-size: 0.9rem;
      min-height: 60px;
    }
    
    .badges {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: var(--spacing-md) 0;
      min-height: 40px;
    }
    
    .badge {
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      background: rgba(0, 229, 255, 0.12);
      color: var(--neon-cyan);
      border: 1px solid rgba(0, 229, 255, 0.25);
      transition: all 0.3s ease;
    }
    
    .badge:hover {
      background: rgba(0, 229, 255, 0.2);
      border-color: rgba(0, 229, 255, 0.4);
      transform: scale(1.05);
    }
    
    .badge-info {
      background: rgba(0, 229, 255, 0.12);
      color: var(--neon-cyan);
      border: 1px solid rgba(0, 229, 255, 0.25);
    }
    
    .badge-success {
      background: rgba(16, 185, 129, 0.15);
      color: #10B981;
      border: 1px solid rgba(16, 185, 129, 0.3);
    }
    
    .badge-closed {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }
    
    .restaurant-card .btn {
      margin-top: var(--spacing-md);
      width: 100%;
      padding: 14px 24px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(8px);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 2000;
    }
    .modal-content {
      width: min(550px, 95vw);
      max-height: 90vh;
      overflow-y: auto;
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      -webkit-backdrop-filter: var(--glass-blur);
      border-radius: var(--radius-xl);
      border: 1px solid var(--glass-border);
      padding: var(--spacing-xl);
      box-shadow: var(--shadow-card);
      position: relative;
      color: var(--text-primary);
    }
    .success-message {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      padding: var(--spacing-md);
      border-radius: var(--radius-md);
      margin-top: var(--spacing-md);
      text-align: center;
      color: var(--text-primary);
    }
    .booking-id {
      font-family: 'Courier New', monospace;
      background: rgba(0, 229, 255, 0.1);
      padding: 8px 12px;
      border-radius: var(--radius-sm);
      margin-top: 10px;
      display: inline-block;
      color: var(--neon-cyan);
      border: 1px solid var(--glass-border);
    }
  </style>
</head>
<body class="page-hidden">
  <nav class="arhgo-nav">
    <div class="arhgo-logo">ArhGo</div>
    <ul>
      <li><a data-nav href="index.html#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a data-nav href="index.html#features">Ø§Ù„Ù…Ø²Ø§ÙŠØ§</a></li>
      <li><a data-nav href="index.html#planner">Ø®Ø·Ø· Ø±Ø­Ù„ØªÙƒ</a></li>
      <li><a data-nav href="index.html#destinations">Ø§Ù„ÙˆØ¬Ù‡Ø§Øª</a></li>
      <li><a data-nav href="hotel.html">Ø§Ù„ÙÙ†Ø§Ø¯Ù‚</a></li>
      <li><a data-nav href="ticket-booking.html">Ø­Ø¬Ø² Ø§Ù„Ø±Ø­Ù„Ø§Øª</a></li>
      <li><a data-nav href="Restuarnt.html">Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</a></li>
      <li><a data-nav href="my-bookings.html">Ø­Ø¬ÙˆØ²Ø§ØªÙŠ</a></li>
    </ul>
    <div class="stack">
      <a class="btn btn-ghost" href="login.html" data-flight-sound id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
      <a class="btn btn-gradient" href="signup.html" data-flight-sound id="signupBtn">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
    </div>
  </nav>
  <main class="page-shell">
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</h2>
        <p class="section-subtitle">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ø­Ø¬Ø² Ø·Ø§ÙˆÙ„ØªÙƒ Ø¨Ø³Ù‡ÙˆÙ„Ø©. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ØªÙØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</p>
      </div>
      <div class="glass-card">
        <div class="search-panel">
          <div class="field">
            <label>Ù†ÙˆØ¹ Ø§Ù„Ø²ÙŠØ§Ø±Ø©</label>
            <select class="arhgo-select" id="visitType">
              <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø²ÙŠØ§Ø±Ø©</option>
              <option value="family">Ø¹Ø§Ø¦Ù„ÙŠØ©</option>
              <option value="single">ÙØ±Ø¯ÙŠØ©</option>
              <option value="business">Ø¹Ù…Ù„</option>
              <option value="romantic">Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©</option>
            </select>
          </div>
          <div class="field">
            <label>Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ($)</label>
            <input class="arhgo-input" type="number" id="budget" min="1" placeholder="Ù…Ø«Ø§Ù„: 50" autocomplete="off" data-form-type="other">
          </div>
          <div class="field">
            <label>Ù†ÙˆØ¹ Ø§Ù„Ø£ÙƒÙ„</label>
            <select class="arhgo-select" id="foodType">
              <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø£ÙƒÙ„</option>
              <option value="Ø¹Ø±Ø¨ÙŠ">Ø¹Ø±Ø¨ÙŠ</option>
              <option value="ØºØ±Ø¨ÙŠ">ØºØ±Ø¨ÙŠ</option>
              <option value="Ø¨Ø­Ø±ÙŠ">Ø¨Ø­Ø±ÙŠ</option>
              <option value="Ø¢Ø³ÙŠÙˆÙŠ">Ø¢Ø³ÙŠÙˆÙŠ</option>
              <option value="ÙˆØ¬Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©">ÙˆØ¬Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©</option>
              <option value="Ø¥ÙŠØ·Ø§Ù„ÙŠ">Ø¥ÙŠØ·Ø§Ù„ÙŠ</option>
              <option value="Ù…ÙƒØ³ÙŠÙƒÙŠ">Ù…ÙƒØ³ÙŠÙƒÙŠ</option>
              <option value="Ø­Ù„ÙˆÙŠØ§Øª">Ø­Ù„ÙˆÙŠØ§Øª</option>
              <option value="Ù…Ø´Ø±ÙˆØ¨Ø§Øª">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</option>
            </select>
          </div>
          <div class="field">
            <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
            <input class="arhgo-input" type="text" id="location" placeholder="Ù…Ø«Ø§Ù„: Ø¯Ø¨ÙŠØŒ Ø¨ØºØ¯Ø§Ø¯ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶" autocomplete="off" data-form-type="other">
          </div>
        </div>
        <div class="stack" style="margin-top: var(--spacing-md); justify-content: flex-end;">
          <button class="btn btn-gradient" id="searchBtn" style="min-width: 160px; padding: 12px 24px; font-size: 0.95rem;">
            <span>ğŸ”</span> Ø¨Ø­Ø«
          </button>
        </div>
      </div>
      <div id="list" class="grid"></div>
      <div id="empty" class="glass-card" style="display:none; text-align: center; padding: 40px;">
        <p style="font-size: 1.1rem; color: var(--muted);">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø·Ø§Ø¹Ù…. Ø¬Ø±Ù‘Ø¨ ØªØºÙŠÙŠØ± Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«.</p>
      </div>
    </section>
  </main>

  <div id="bookingModal" class="modal">
    <div class="modal-content">
      <button class="btn btn-ghost" id="closeModal" style="position:absolute;top:10px;left:10px;">âœ•</button>
      <h3 style="margin-top:0; color: var(--primary);" id="modalRestaurantName">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</h3>
      <form id="bookingForm">
        <div class="field">
          <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
          <input class="arhgo-input" id="bookName" type="text" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required>
        </div>
        <div class="field">
          <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
          <input class="arhgo-input" id="bookPhone" type="tel" placeholder="+964 770 000 0000" required>
        </div>
        <div class="field">
          <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
          <input class="arhgo-input" id="bookEmail" type="email" placeholder="example@mail.com">
        </div>
        <div class="field">
          <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ø®Ø§Øµ *</label>
          <input class="arhgo-input" id="bookPeople" type="number" min="1" max="20" value="2" required>
        </div>
        <div class="field">
          <label>Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª *</label>
          <input class="arhgo-input" id="bookDate" type="datetime-local" required>
        </div>
        <div class="field">
          <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ©</label>
          <textarea class="arhgo-textarea" id="bookNotes" placeholder="Ø·Ù„Ø¨Ø§Øª Ø®Ø§ØµØ© (Ù…Ø«Ù„: Ø·Ø§ÙˆÙ„Ø© Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù†Ø§ÙØ°Ø©ØŒ Ø­Ø³Ø§Ø³ÙŠØ© Ù…Ù† Ø·Ø¹Ø§Ù… Ù…Ø¹ÙŠÙ†ØŒ Ø¥Ù„Ø®)"></textarea>
        </div>
        <button class="btn btn-gradient" type="submit" style="width: 100%; margin-top: 12px;">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</button>
      </form>
      <div id="successMessage" class="success-message" style="display: none;">
        <h4 style="color: var(--success); margin: 0 0 10px 0;">âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­!</h4>
        <p>Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²:</p>
        <div class="booking-id" id="bookingIdDisplay"></div>
        <div class="action-buttons" style="display: flex; gap: 10px; margin-top: 15px;">
          <button class="btn btn-gradient" onclick="printRestaurantBooking()" style="flex: 1;">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„</button>
          <button class="btn btn-ghost" onclick="closeBookingModal()" style="flex: 1;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    function updateAuthButtons() {
      console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±...');
      const session_token = localStorage.getItem('session_token');
      const userStr = localStorage.getItem('user');
      const user = userStr ? JSON.parse(userStr) : {};
      const loginBtn = document.getElementById('loginBtn');
      const signupBtn = document.getElementById('signupBtn');
      
      console.log('Session token:', session_token ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
      console.log('User data:', user);
      console.log('Login button:', loginBtn ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
      console.log('Signup button:', signupBtn ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
      
      if (!loginBtn || !signupBtn) {
        console.warn('âš ï¸ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø¹Ø¯');
        setTimeout(updateAuthButtons, 500);
        return;
      }
      
      if (session_token && user.full_name) {
        // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„
        loginBtn.textContent = user.full_name;
        loginBtn.href = 'my-bookings.html';
        loginBtn.style.color = '#37D6C0';
        signupBtn.textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';
        signupBtn.href = '#';
        signupBtn.onclick = (e) => {
          e.preventDefault();
          if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
            localStorage.removeItem('session_token');
            localStorage.removeItem('user');
            localStorage.removeItem('arhgo_current_user');
            localStorage.removeItem('loggedIn');
            window.location.href = 'login.html';
          }
        };
        console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„:', user.full_name);
      } else {
        // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„
        loginBtn.textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
        loginBtn.href = 'login.html';
        loginBtn.style.color = '';
        signupBtn.textContent = 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨';
        signupBtn.href = 'signup.html';
        signupBtn.onclick = null;
        console.log('â„¹ï¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„');
      }
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', updateAuthButtons);
    } else {
      updateAuthButtons();
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    window.addEventListener('authStateChanged', updateAuthButtons);
    window.addEventListener('storage', updateAuthButtons);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø©
    window.addEventListener('focus', updateAuthButtons);
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden) {
        updateAuthButtons();
      }
    });
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† (Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«)
    document.addEventListener('click', () => {
      setTimeout(updateAuthButtons, 100);
    });
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙƒÙ„ 2 Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØªØ£ÙƒØ¯
    setInterval(updateAuthButtons, 2000);
    
    const $ = (id) => document.getElementById(id);
    const list = $('list');
    const empty = $('empty');
    let currentBooking = null;
    let currentRestaurant = null;
    
    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† list Ù„Ø¯ÙŠÙ‡ class grid
    if (list && !list.classList.contains('grid')) {
      list.classList.add('grid');
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
    console.log('ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ±:');
    console.log('  - list element:', list);
    console.log('  - empty element:', empty);
    console.log('  - list Ù…ÙˆØ¬ÙˆØ¯ØŸ', list !== null);
    console.log('  - empty Ù…ÙˆØ¬ÙˆØ¯ØŸ', empty !== null);
    
    if (!list) {
      console.error('âŒ Ø¹Ù†ØµØ± list ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
    }
    if (!empty) {
      console.error('âŒ Ø¹Ù†ØµØ± empty ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
    }

    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ

    const stars = (rating) => 'â˜…'.repeat(Math.floor(rating)) + (rating % 1 >= 0.5 ? 'Â½' : '') + 'â˜†'.repeat(5 - Math.ceil(rating));
    
    const isOpen = (hours) => {
      const h = new Date().getHours();
      const open = hours.open;
      let close = hours.close === 0 ? 24 : hours.close;
      return open < close ? h >= open && h < close : h >= open || h < close;
    };

    function renderList(data) {
      console.log('ğŸ¨ renderList Ø§Ø³ØªØ¯Ø¹ÙŠ Ù…Ø¹', data ? data.length : 0, 'Ù…Ø·Ø¹Ù…');
      console.log('ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø·Ø§Ø¹Ù…:', data);
      
      if (!list) {
        console.error('âŒ Ø¹Ù†ØµØ± list ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
        return;
      }
      
      if (!data || !data.length) {
        console.warn('âš ï¸ renderList: Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø±ØºØ©');
        list.innerHTML = '';
        if (empty) empty.style.display = 'block';
        return;
      }
      
      if (empty) empty.style.display = 'none';
      
      // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† list Ù„Ø¯ÙŠÙ‡ class grid
      if (!list.classList.contains('grid')) {
        list.classList.add('grid');
      }
      
      try {
        const html = data.map((item, index) => {
          // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
          const itemName = item.name || 'Ù…Ø·Ø¹Ù… Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…';
          const itemDesc = item.desc || item.description || '';
          const itemRating = parseFloat(item.rating) || 0;
          const itemPriceRange = item.priceRange || item.price_range || '$';
          const itemLocation = item.location || '';
          const itemCountry = item.country || '';
          const itemFoodType = item.foodType || item.food_type || '';
          const itemId = item.id || 0;
          
          // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ hours
          const itemHours = item.hours || {
            open: parseInt(item.open_hour) || 10,
            close: parseInt(item.close_hour) || 22
          };
          
          const itemNameEscaped = itemName.replace(/'/g, "\\'").replace(/"/g, '&quot;');
          const foodTypeEscaped = itemFoodType.replace(/'/g, "\\'").replace(/"/g, '&quot;');
          
          return `
          <article class="restaurant-card">
            <h3>${itemName}</h3>
            <p>ğŸ“ ${itemLocation}${itemCountry ? ', ' + itemCountry : ''} â€” ${stars(itemRating)} ${itemRating.toFixed(1)}</p>
            <p>${itemDesc || ''}</p>
            <div class="badges">
              <span class="badge ${isOpen(itemHours) ? 'badge-success' : 'badge-closed'}">
                ${isOpen(itemHours) ? 'ğŸŸ¢ Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†' : 'ğŸ”´ Ù…ØºÙ„Ù‚'}
              </span>
              <span class="badge badge-info">${itemPriceRange}</span>
              ${itemFoodType ? `<span class="badge badge-info">${itemFoodType}</span>` : ''}
            </div>
            <div class="stack" style="margin-top:16px;">
              <button class="btn btn-gradient" onclick="openBooking(${itemId}, '${itemNameEscaped}', '${foodTypeEscaped}')" style="flex: 1;">Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button>
            </div>
          </article>
        `;
        }).join('');
        
        console.log('âœ… HTML ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ØŒ Ø§Ù„Ø·ÙˆÙ„:', html.length);
        console.log('ğŸ” HTML (Ø£ÙˆÙ„ 300 Ø­Ø±Ù):', html.substring(0, 300));
        
        if (!list) {
          console.error('âŒ Ø¹Ù†ØµØ± list ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ renderList!');
          return;
        }
        
        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† list Ù„Ø¯ÙŠÙ‡ class grid
        if (!list.classList.contains('grid')) {
          list.classList.add('grid');
          console.log('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© class grid Ø¥Ù„Ù‰ list');
        }
        
        // ØªØ¹ÙŠÙŠÙ† HTML
        list.innerHTML = html;
        console.log('âœ… ØªÙ… ØªØ¹ÙŠÙŠÙ† HTML Ø¥Ù„Ù‰ list');
        console.log('âœ… list.innerHTML.length:', list.innerHTML.length);
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
        const cards = list.querySelectorAll('.restaurant-card');
        console.log('âœ… Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙÙŠ DOM:', cards.length);
        
        if (cards.length === 0 && html.length > 0) {
          console.error('âŒ HTML Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù… ØªØ¸Ù‡Ø±!');
          console.error('list.style.display:', window.getComputedStyle(list).display);
          console.error('list.style.visibility:', window.getComputedStyle(list).visibility);
          console.error('list.offsetHeight:', list.offsetHeight);
          console.error('list.offsetWidth:', list.offsetWidth);
        }
        
      } catch (error) {
        console.error('âŒ Error in renderList:', error);
        console.error('Error details:', {
          message: error.message,
          stack: error.stack
        });
        list.innerHTML = `<div class='glass-card' style='text-align: center; padding: 40px; color: var(--danger);'>âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…: ${error.message}</div>`;
      }
    }

    async function applyFilters() {
      console.log('ğŸš€ Ø¨Ø¯Ø¡ applyFilters...');
      
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
      if (!list) {
        console.error('âŒ Ø¹Ù†ØµØ± list ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
        alert('Ø®Ø·Ø£: Ø¹Ù†ØµØ± list ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ØµÙØ­Ø©!');
        return;
      }
      
      if (!empty) {
        console.warn('âš ï¸ Ø¹Ù†ØµØ± empty ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
      }
      
      // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬" Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø­Ø«
      if (empty) empty.style.display = 'none';
      
      // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† list Ù„Ø¯ÙŠÙ‡ class grid
      if (!list.classList.contains('grid')) {
        list.classList.add('grid');
        console.log('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© class grid Ø¥Ù„Ù‰ list');
      }
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
      list.innerHTML = "<div class='glass-card' style='text-align: center; padding: 40px;'>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø·Ø§Ø¹Ù…...</div>";
      console.log('âœ… ØªÙ… Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„');
      
      try {
        // Ø¨Ù†Ø§Ø¡ URL Ù„Ù„Ø¨Ø­Ø«
        const params = new URLSearchParams();
        const foodType = $('foodType').value;
        const location = $('location').value.trim();
        
        if (foodType) params.append('food_type', foodType);
        if (location) params.append('location', location);
        
        const baseUrl = window.location.protocol === 'file:' ? 'http://localhost/ArhGo-trip-planner/' : './';
        const apiUrl = baseUrl + `api/get_restaurants.php?${params.toString()}`;
        
        console.log('ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø·Ø§Ø¹Ù…:', apiUrl);
        console.log('ğŸŒ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„:', window.location.protocol);
        
        const response = await fetch(apiUrl);
        console.log('ğŸ“¥ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:', response.status, response.statusText);
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const result = await response.json();
        console.log('ğŸ“¦ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ù† API:', result);
        console.log('ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…:', result.count || 0);
        console.log('ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', result.total_in_db || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ');
        console.log('ğŸ“‹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', result.data);
        
        if (result.success && result.data) {
          console.log('âœ… API Ù†Ø¬Ø­ØŒ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…:', result.data.length);
          
          if (result.data.length === 0) {
            console.warn('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… ÙÙŠ Ø§Ù„Ù†ØªÙŠØ¬Ø©');
            list.innerHTML = '';
            empty.style.display = 'block';
            empty.innerHTML = '<p style="font-size: 1.1rem; color: var(--muted);">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø·Ø§Ø¹Ù…. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ Ø¬Ø±Ù‘Ø¨ ØªØºÙŠÙŠØ± Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«.</p>';
            return;
          }
          
          // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† MySQL Ø¥Ù„Ù‰ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
          const restaurants = result.data.map(rest => ({
            id: rest.id,
            name: rest.name,
            desc: rest.description || '',
            location: rest.city_name_ar || rest.location || '',
            country: rest.country_name_ar || '',
            foodType: rest.food_type || '',
            rating: parseFloat(rest.rating) || 0,
            priceRange: rest.price_range || '$',
            open_hour: rest.open_hour || 10,
            close_hour: rest.close_hour || 22,
            hours: {
              open: parseInt(rest.open_hour) || 10,
              close: parseInt(rest.close_hour) || 22
            }
          }));
          
          console.log('ğŸ¨ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„:', restaurants);
          console.log('ğŸ“ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„:', restaurants.length);
          
          // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© (Ø¥Ø°Ø§ ØªÙ… ØªØ­Ø¯ÙŠØ¯Ù‡Ø§)
          const budget = parseFloat($('budget').value);
          let filtered = restaurants;
          
          if (budget) {
            const priceMap = { '$': 30, '$$': 60, '$$$': 100, '$$$$': 200 };
            filtered = restaurants.filter(rest => {
              const maxPrice = priceMap[rest.priceRange] || 50;
              return budget >= maxPrice * 0.7; // Ù…Ø±ÙˆÙ†Ø© ÙÙŠ Ø§Ù„Ø³Ø¹Ø±
            });
            console.log('ğŸ’° Ø¨Ø¹Ø¯ ÙÙ„ØªØ±Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©:', filtered.length);
          }
          
          if (filtered.length === 0) {
            console.warn('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… Ø¨Ø¹Ø¯ Ø§Ù„ÙÙ„ØªØ±Ø©');
            list.innerHTML = '';
            empty.style.display = 'block';
            empty.innerHTML = '<p style="font-size: 1.1rem; color: var(--muted);">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø·Ø§Ø¹Ù… ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«. Ø¬Ø±Ù‘Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø£Ùˆ Ù†ÙˆØ¹ Ø§Ù„Ø·Ø¹Ø§Ù….</p>';
          } else {
            console.log('âœ… Ø³ÙŠØªÙ… Ø¹Ø±Ø¶', filtered.length, 'Ù…Ø·Ø¹Ù…');
            console.log('ğŸ” Ù‚Ø¨Ù„ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ renderList - filtered:', filtered);
            console.log('ğŸ” Ù‚Ø¨Ù„ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ renderList - list element:', list);
            console.log('ğŸ” Ù‚Ø¨Ù„ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ renderList - list Ù…ÙˆØ¬ÙˆØ¯ØŸ', list !== null);
            
            if (!list) {
              console.error('âŒ Ø¹Ù†ØµØ± list ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
              alert('Ø®Ø·Ø£: Ø¹Ù†ØµØ± list ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ØµÙØ­Ø©!');
              return;
            }
            
            renderList(filtered);
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ø±Ø¶
            setTimeout(() => {
              const cards = list.querySelectorAll('.restaurant-card');
              console.log('ğŸ” Ø¨Ø¹Ø¯ renderList - Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª:', cards.length);
              console.log('ğŸ” Ø¨Ø¹Ø¯ renderList - list.innerHTML.length:', list.innerHTML.length);
              
              if (cards.length === 0 && filtered.length > 0) {
                console.error('âŒ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„ÙƒÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù… ØªØ¸Ù‡Ø±!');
                console.error('HTML (Ø£ÙˆÙ„ 500 Ø­Ø±Ù):', list.innerHTML.substring(0, 500));
                alert(`ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${filtered.length} Ù…Ø·Ø¹Ù… Ù„ÙƒÙ† Ù„Ù… ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ØµÙØ­Ø©. ØªØ­Ù‚Ù‚ Ù…Ù† Console (F12) Ù„Ù„ØªÙØ§ØµÙŠÙ„.`);
              } else if (cards.length > 0) {
                console.log('âœ… ØªÙ… Ø¹Ø±Ø¶', cards.length, 'Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­!');
              }
            }, 200);
          }
        } else {
          console.error('âŒ API ÙØ´Ù„:', result.error || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª');
          throw new Error(result.error || 'Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        }
      } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«:', error);
        console.error('ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£:', {
          message: error.message,
          stack: error.stack,
          name: error.name
        });
        
        list.innerHTML = '';
        empty.style.display = 'block';
        
        let errorMessage = error.message || 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª';
        let tipMessage = 'ğŸ’¡ Ù†ØµÙŠØ­Ø©: ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¹Ù…';
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ø§ØµØ© Ù„Ø£Ø®Ø·Ø§Ø¡ CORS Ø£Ùˆ Network
        if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError') || error.name === 'TypeError') {
          errorMessage = 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
          tipMessage = 'ğŸ’¡ Ù†ØµÙŠØ­Ø©: ØªØ£ÙƒØ¯ Ù…Ù† ÙØªØ­ Ø§Ù„Ù…Ù„Ù Ù…Ù† <a href="http://localhost/ArhGo-trip-planner/Restuarnt.html" style="color: #37D6C0;">http://localhost/ArhGo-trip-planner/Restuarnt.html</a> ÙˆÙ„ÙŠØ³ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…';
        }
        
        empty.innerHTML = `
          <div style='text-align: center; padding: 40px;'>
            <p style="font-size: 1.1rem; color: var(--danger); margin-bottom: 10px;">âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«</p>
            <p style="font-size: 0.9rem; color: var(--muted);">${errorMessage}</p>
            <p style="font-size: 0.85rem; color: var(--muted); margin-top: 10px;">${tipMessage}</p>
            ${window.location.protocol === 'file:' ? '<p style="font-size: 0.85rem; color: #37D6C0; margin-top: 15px;"><strong>ğŸ”— <a href="http://localhost/ArhGo-trip-planner/Restuarnt.html" style="color: #37D6C0;">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ù…Ù† localhost</a></strong></p>' : ''}
          </div>
        `;
      }
    }

    window.openBooking = (id, name, foodType) => {
      try {
        console.log('ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø¹Ù…:', { id, name, foodType });
        currentRestaurant = { id, name, foodType };
        $('modalRestaurantName').textContent = `Ø§Ø­Ø¬Ø² Ø·Ø§ÙˆÙ„ØªÙƒ ÙÙŠ ${name}`;
        $('bookingForm').reset();
        $('bookingForm').style.display = 'block';
        $('successMessage').style.display = 'none';
        
        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„ØªØ§Ø±ÙŠØ® (Ø§Ù„ÙŠÙˆÙ…)
        const now = new Date();
        now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
        $('bookDate').setAttribute('min', now.toISOString().slice(0, 16));
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©
        $('bookingModal').style.display = 'flex';
        console.log('âœ… ØªÙ… ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­');
      } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø¹Ù…:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø­Ø¬Ø². ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
      }
    };

    $('closeModal').addEventListener('click', closeBookingModal);
    $('bookingModal').addEventListener('click', (e) => {
      if (e.target.id === 'bookingModal') closeBookingModal();
    });

    function closeBookingModal() {
      $('bookingModal').style.display = 'none';
      $('bookingForm').reset();
      $('successMessage').style.display = 'none';
      currentBooking = null;
    }

    $('bookingForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const session_token = localStorage.getItem('session_token');
      if (!session_token) {
        alert('âŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø­Ø¬Ø² Ù…Ø·Ø¹Ù…');
        window.location.href = 'login.html';
        return;
      }
      
      const name = $('bookName').value.trim();
      const phone = $('bookPhone').value.trim();
      const email = $('bookEmail').value.trim();
      const people = parseInt($('bookPeople').value);
      const dateTime = $('bookDate').value;
      const notes = $('bookNotes').value.trim();

      if (!name || !phone || !people || !dateTime) {
        alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
        return;
      }

      // ÙØµÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
      const [bookingDate, bookingTime] = dateTime.split('T');
      if (!bookingDate || !bookingTime) {
        alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
        return;
      }

      // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
      const submitBtn = e.target.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø¬Ø²...';

      try {
        const baseUrl = window.location.protocol === 'file:' ? 'http://localhost/ArhGo-trip-planner/' : './';
        
        const bookingData = {
          session_token: session_token,
          restaurant_id: currentRestaurant.id,
          booking_date: bookingDate,
          booking_time: bookingTime,
          guests: people,
          special_requests: notes || ''
        };
        
        console.log('ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø¹Ù…:', bookingData);
        console.log('ğŸŒ URL:', baseUrl + 'api/book_restaurant.php');
        
        const response = await fetch(baseUrl + 'api/book_restaurant.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(bookingData)
        });

        console.log('ğŸ“¥ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:', response.status, response.statusText);
        
        const result = await response.json();
        console.log('ğŸ“¦ Ø§Ù„Ù†ØªÙŠØ¬Ø©:', result);

        if (result.success) {
          console.log('âœ… ØªÙ… Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­! Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²:', result.booking_reference);
          
          // Ø­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹ Ø£ÙŠØ¶Ø§Ù‹ Ù„Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
          const localBookingData = {
            restaurantId: currentRestaurant.id,
            restaurantName: currentRestaurant.name,
            name,
            phone,
            email: email || null,
            people,
            date: dateTime,
            notes: notes || null,
            price: result.total_price
          };
          currentBooking = bookingSystem.bookRestaurant(localBookingData);
          
          // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
          $('bookingIdDisplay').textContent = result.booking_reference;
          $('successMessage').style.display = 'block';
          $('bookingForm').style.display = 'none';

          // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
          setTimeout(() => {
            $('bookingForm').reset();
            $('successMessage').style.display = 'none';
            $('bookingForm').style.display = 'block';
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
            closeBookingModal();
          }, 3000);
        } else {
          console.error('âŒ ÙØ´Ù„ Ø§Ù„Ø­Ø¬Ø²:', result);
          throw new Error(result.error || 'ÙØ´Ù„ Ø§Ù„Ø­Ø¬Ø²');
        }
      } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø¹Ù…:', error);
        console.error('ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£:', {
          message: error.message,
          stack: error.stack,
          name: error.name
        });
        
        let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²';
        if (error.message) {
          errorMessage = error.message;
        } else if (error instanceof TypeError && error.message.includes('fetch')) {
          errorMessage = 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ØªØ³ØªØ®Ø¯Ù… http://localhost';
        }
        
        alert('âŒ ' + errorMessage + '\n\nØ§ÙØªØ­ Console (F12) Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });

    function printRestaurantBooking() {
      if (currentBooking) {
        bookingSystem.printBooking(currentBooking);
      }
    }

    // Ù…Ù†Ø¹ Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© autocomplete Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ (Saved info)
    const budgetInput = $('budget');
    const locationInput = $('location');
    
    if (budgetInput) {
      budgetInput.setAttribute('autocomplete', 'off');
      budgetInput.setAttribute('data-form-type', 'other');
      budgetInput.setAttribute('data-lpignore', 'true');
      budgetInput.setAttribute('data-1p-ignore', 'true');
      // Ù…Ù†Ø¹ autocomplete Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
      budgetInput.addEventListener('focus', function() {
        this.setAttribute('autocomplete', 'new-password');
      });
      budgetInput.addEventListener('blur', function() {
        this.setAttribute('autocomplete', 'off');
      });
    }
    
    if (locationInput) {
      locationInput.setAttribute('autocomplete', 'off');
      locationInput.setAttribute('data-form-type', 'other');
      locationInput.setAttribute('data-lpignore', 'true');
      locationInput.setAttribute('data-1p-ignore', 'true');
      // Ù…Ù†Ø¹ autocomplete Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
      locationInput.addEventListener('focus', function() {
        this.setAttribute('autocomplete', 'new-password');
      });
      locationInput.addEventListener('blur', function() {
        this.setAttribute('autocomplete', 'off');
      });
    }
    
    // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø²Ø± Ø§Ù„Ø¨Ø­Ø«
    function setupSearchButton() {
      const searchBtn = $('searchBtn');
      if (!searchBtn) {
        console.error('âŒ Ø²Ø± Ø§Ù„Ø¨Ø­Ø« ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
        // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ 500ms
        setTimeout(setupSearchButton, 500);
        return;
      }
      
      console.log('âœ… Ø²Ø± Ø§Ù„Ø¨Ø­Ø« Ù…ÙˆØ¬ÙˆØ¯');
      
      // Ø¥Ø²Ø§Ù„Ø© event listener Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ù† ÙˆØ¬Ø¯
      const newSearchBtn = searchBtn.cloneNode(true);
      searchBtn.parentNode.replaceChild(newSearchBtn, searchBtn);
      
      // Ø¥Ø¶Ø§ÙØ© event listener Ø¬Ø¯ÙŠØ¯
      newSearchBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        console.log('ğŸ”˜ ØªÙ… Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¨Ø­Ø«');
        console.log('ğŸ” Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«:', {
          foodType: $('foodType') ? $('foodType').value : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯',
          location: $('location') ? $('location').value : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯',
          budget: $('budget') ? $('budget').value : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯',
          visitType: $('visitType') ? $('visitType').value : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'
        });
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† applyFilters Ù…ÙˆØ¬ÙˆØ¯
        if (typeof applyFilters === 'function') {
          console.log('âœ… applyFilters Ù…ÙˆØ¬ÙˆØ¯ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡...');
          applyFilters();
        } else {
          console.error('âŒ applyFilters ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
          alert('Ø®Ø·Ø£: Ø¯Ø§Ù„Ø© applyFilters ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©!');
        }
      });
      
      console.log('âœ… ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø²Ø± Ø§Ù„Ø¨Ø­Ø« Ø¨Ù†Ø¬Ø§Ø­');
    }
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø²Ø± Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', setupSearchButton);
    } else {
      setupSearchButton();
    }

    // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Enter
    ['visitType', 'budget', 'foodType', 'location'].forEach(id => {
      const el = $(id);
      if (el) {
        el.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') applyFilters();
        });
      }
    });

    // Ù„Ø§ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ - ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø­Ø«
    // applyFilters(); // ØªÙ… ØªØ¹Ø·ÙŠÙ„Ù‡
  </script>
</body>
</html>
