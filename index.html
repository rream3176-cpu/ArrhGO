<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArhGo โ ุงูููุตูุฉ ุงูุฐููุฉ ูุชุฎุทูุท ุงูุณูุฑ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700;800;900&family=Cinzel:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/arhgo.css">
  <script src="assets/js/user-auth.js" defer></script>
  <script src="assets/js/arhgo.js" defer></script>
  <script src="assets/js/countries-database.js" defer></script>
  <script src="assets/js/smart-country-suggestor.js" defer></script>
  <script src="assets/js/globe-interaction.js" defer></script>
</head>
<body class="page-hidden">
  <nav class="arhgo-nav">
    <div class="arhgo-logo">ArhGo</div>
      <ul>
        <li><a data-nav href="index.html#home" data-translate="nav.home">ุงูุฑุฆูุณูุฉ</a></li>
      <li><a data-nav href="hotel.html" data-translate="nav.hotels">ุงูููุงุฏู</a></li>
      <li><a data-nav href="ticket-booking.html" data-translate="nav.flights">ุญุฌุฒ ุงูุฑุญูุงุช</a></li>
      <li><a data-nav href="Restuarnt.html" data-translate="nav.restaurants">ูุทุงุนู</a></li>
      <li><a data-nav href="my-bookings.html">ุญุฌูุฒุงุชู</a></li>
      <li><a data-nav href="analytics.html">ุงูุชุญูููุงุช</a></li>
      <li><a data-nav href="budget-manager.html">ุฅุฏุงุฑุฉ ุงูููุฒุงููุฉ</a></li>
      <li><a data-nav href="price-comparison.html">ููุงุฑูุฉ ุงูุฃุณุนุงุฑ</a></li>
      <li><a data-nav href="smart-alerts.html">ุงูุชูุจููุงุช</a></li>
  </ul>
    <div class="stack" id="authButtons">
      <a class="btn btn-ghost" href="login.html" data-flight-sound data-translate="nav.login" id="loginBtn">ุชุณุฌูู ุงูุฏุฎูู</a>
      <a class="btn btn-gradient" href="signup.html" data-flight-sound data-translate="nav.signup" id="signupBtn">ุฅูุดุงุก ุญุณุงุจ</a>
    </div>
    <div class="stack" id="userProfile" style="display: none; align-items: center; gap: var(--spacing-sm);">
      <span class="user-name" id="userNameDisplay" style="color: var(--neon-cyan); font-weight: 700; font-size: 1rem; white-space: nowrap; text-shadow: 0 0 10px var(--neon-cyan-glow);">ุงููุณุชุฎุฏู</span>
      <button class="btn btn-ghost" onclick="userAuth.logout(); location.reload();" style="padding: 8px 16px; font-size: 0.85rem; white-space: nowrap;">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
    </div>
</nav>

  <main class="page-shell">
<section class="hero" id="home">
      <div class="hero-grid">
        <div class="hero-main">
          <h1 data-translate="hero.title">Your Smart Travel Experience Starts Here</h1>
          <p data-translate="hero.subtitle">ููุตุฉ ุฐููุฉ ูุชุฎุทูุท ุฑุญูุงุชู ุจูู ุณูููุฉ ูุฃูุงูุฉ. ุฎุทุท ูุฎุตุตุฉุ ุงูุชุฑุงุญุงุช ุฐููุฉุ ููุดุงุฑูุฉ ููุฑูุฉ.</p>
          <div class="hero-highlights">
            <div class="highlight-chip">
              <em>โฆ</em> <span data-translate="hero.highlight1">ุฎุทุฉ ุฃููู ุฌุงูุฒุฉ ุฎูุงู ุฏูููุฉ ูุงุญุฏุฉ</span>
            </div>
            <div class="highlight-chip">
              <em>โฒ</em> <span data-translate="hero.highlight2">ูุฒุงุฌ ุงูุณูุฑ ูุชุบูุฑ ุจููุณุฉ ูุงุญุฏุฉ</span>
            </div>
          </div>
          <div class="hero-actions">
            <button class="btn btn-gradient" id="hero-cta" data-flight-sound data-translate="hero.cta">ุงุจุฏุฃ ุงูุชุฎุทูุท ุงูุขู</button>
            <a class="btn btn-ghost" href="smart-planner.html" data-flight-sound data-translate="hero.ai">ูููุฏ ุฎุทุท ุฐูู</a>
            <a class="btn btn-ghost" href="analytics.html" data-flight-sound>ููุญุฉ ุงูุชุญูููุงุช</a>
          </div>
        </div>
          <div class="hero-visual">
           <div class="globe-container">
             <div class="globe-wrapper">
               <div class="globe">
                 <div class="globe-sphere">
                   <img src="https://upload.wikimedia.org/wikipedia/commons/8/83/Equirectangular_projection_SW.jpg" alt="World Map" class="world-map-texture" />
                 </div>
                 <div class="globe-shine"></div>
               </div>
               <div class="globe-rings">
                 <div class="ring ring-1"></div>
                 <div class="ring ring-2"></div>
                 <div class="ring ring-3"></div>
               </div>
             </div>
           </div>
         </div>
       </div>
     </section>

    <section class="section" id="planner">
      <div class="section-header">
        <h2 class="section-title" data-translate="sections.planner.title">ุตููู ุฑุญูุชู ุฎูุงู ุฏูููุฉ</h2>
        <p class="section-subtitle" data-translate="sections.planner.subtitle">ุงููุฃ ุงูุชูุงุตููุ ุดุงูุฏ ุงูุชูููุฉ ุงูุชูุฏูุฑูุฉุ ุงุญูุธ ุฎุทุชู ุฃู ุดุงุฑููุงุ ุซู ุงูุชูู ุฅูู ุงูููุฎุต ุฃู ุงููููุฏ ุงูุฐูู.</p>
      </div>
      <div class="split" style="position: relative; z-index: 10;">
        <form class="arhgo-form" id="trip-form" style="position: relative; z-index: 10;">
    <div class="field full-width">
            <label for="trip-name">ุงุณูู</label>
            <input class="arhgo-input" type="text" id="trip-name" placeholder="ูุซุงู: ุนูู ูุญูุฏ">
    </div>
    
    <div class="field">
            <label for="trip-weather">ุงูุฌู ุงูููุถู</label>
            <select class="arhgo-select" id="trip-weather">
              <option value="">ุงุฎุชุฑ ุงูุฌู ุงูููุถู...</option>
              <option value="ุฏุงูุฆ">ุฏุงูุฆ</option>
              <option value="ูุนุชุฏู">ูุนุชุฏู</option>
              <option value="ุจุงุฑุฏ">ุจุงุฑุฏ</option>
              <option value="ุญุงุฑ">ุญุงุฑ</option>
            </select>
    </div>
    
    <div class="field">
            <label for="trip-scenery">ุงูููุธุฑ ุงูููุถู</label>
            <select class="arhgo-select" id="trip-scenery">
              <option value="">ุงุฎุชุฑ ุงูููุธุฑ ุงูููุถู...</option>
              <option value="ูุฏููุฉ">ูุฏููุฉ</option>
              <option value="ุจุญุฑ">ุจุญุฑ</option>
              <option value="ุทุจูุนุฉ">ุทุจูุนุฉ</option>
              <option value="ุฌุจุงู">ุฌุจุงู</option>
              <option value="ุตุญุฑุงุก">ุตุญุฑุงุก</option>
              <option value="ุชุงุฑูุฎ">ุชุงุฑูุฎ</option>
            </select>
    </div>
    
    <div class="field">
            <label for="trip-type">ููุน ุงูุฑุญูุฉ</label>
            <select class="arhgo-select" id="trip-type">
              <option value="">ุงุฎุชุฑ ููุน ุงูุฑุญูุฉ...</option>
              <option value="ุซูุงูู">ุซูุงูู</option>
              <option value="ูุบุงูุฑุฉ">ูุบุงูุฑุฉ</option>
              <option value="ุฑููุงูุณู">ุฑููุงูุณู</option>
              <option value="ุชุณูู">ุชุณูู</option>
              <option value="ุทุนุงู">ุทุนุงู</option>
              <option value="ุชุงุฑูุฎ">ุชุงุฑูุฎ</option>
              <option value="ุชุฑููู">ุชุฑููู</option>
              <option value="ุนูุงุฆู">ุนูุงุฆู</option>
              <option value="ุทูุงุจ">ุทูุงุจ</option>
              <option value="ุจุญุฑ">ุจุญุฑ</option>
              <option value="ุทุจูุนุฉ">ุทุจูุนุฉ</option>
            </select>
    </div>
    
    <div class="field">
            <label for="trip-budget">ุงูููุฒุงููุฉ</label>
            <select class="arhgo-select" id="trip-budget">
              <option value="">ุงุฎุชุฑ ุงูููุฒุงููุฉ...</option>
              <option value="low">ููุฎูุถุฉ (ุงูุชุตุงุฏูุฉ)</option>
              <option value="medium">ูุชูุณุทุฉ</option>
              <option value="high">ูุงุฎุฑุฉ</option>
            </select>
    </div>
    
    <div class="field full-width">
            <label for="trip-interests">ุงูุชูุงูุงุชู ุงูุฑุฆูุณูุฉ</label>
            <select class="arhgo-select" id="trip-interests" multiple>
              <option value="ุซูุงูุฉ">ุซูุงูุฉ</option>
              <option value="ุชุงุฑูุฎ">ุชุงุฑูุฎ</option>
              <option value="ุทุนุงู">ุทุนุงู</option>
              <option value="ุทุจูุนุฉ">ุทุจูุนุฉ</option>
              <option value="ุจุญุฑ">ุจุญุฑ</option>
              <option value="ุชุณูู">ุชุณูู</option>
              <option value="ูุบุงูุฑุฉ">ูุบุงูุฑุฉ</option>
              <option value="ูู">ูู</option>
              <option value="ุฑูุงุถุฉ">ุฑูุงุถุฉ</option>
              <option value="ุงุณุชุฑุฎุงุก">ุงุณุชุฑุฎุงุก</option>
            </select>
            <small class="field-hint">ุงุถุบุท Ctrl/Cmd ูุงุฎุชูุงุฑ ุฃูุซุฑ ูู ูุงุญุฏ</small>
    </div>
    
    <div class="field">
            <label for="trip-people">ุนุฏุฏ ุงูุฃุดุฎุงุต</label>
            <input class="arhgo-input" type="number" id="trip-people" min="1" placeholder="ูุซุงู: 2">
    </div>
    
    <div class="field">
            <label for="trip-days">ุนุฏุฏ ุงูุฃูุงู</label>
            <input class="arhgo-input" type="number" id="trip-days" min="1" placeholder="ูุซุงู: 5">
    </div>
    
    <div class="field suggested-country-field full-width">
            <label>ุงูุฏููุฉ ุงูููุชุฑุญุฉ (ุฐููุฉ)</label>
            <div id="suggested-country">
              <span id="suggested-country-name">ุงููุฃ ุงูุญููู ุฃุนูุงู ููุญุตูู ุนูู ุงูุชุฑุงุญ ุฐูู</span>
            </div>
            <button type="button" class="btn btn-ghost" id="use-suggested-btn" onclick="useSuggestedCountry()" style="display: none;">
              ุงุณุชุฎุฏู ูุฐุง ุงูุงูุชุฑุงุญ
            </button>
    </div>
    
    <div class="field">
            <label for="trip-country">ุงููุฌูุฉ (ุงุฎุชูุงุฑู)</label>
            <select class="arhgo-select" id="trip-country">
              <option value="" data-translate="form.selectDestination">ุฃู ุงุฎุชุฑ ูุฏููุงู...</option>
              <option value="ุงูุณุนูุฏูุฉ">ุงูุณุนูุฏูุฉ</option>
              <option value="ุงูุฅูุงุฑุงุช">ุงูุฅูุงุฑุงุช</option>
              <option value="ุงููููุช">ุงููููุช</option>
              <option value="ูุทุฑ">ูุทุฑ</option>
              <option value="ุงูุจุญุฑูู">ุงูุจุญุฑูู</option>
              <option value="ุนููุงู">ุนููุงู</option>
              <option value="ุงูููู">ุงูููู</option>
              <option value="ุงูุนุฑุงู">ุงูุนุฑุงู</option>
              <option value="ุณูุฑูุง">ุณูุฑูุง</option>
              <option value="ุงูุฃุฑุฏู">ุงูุฃุฑุฏู</option>
              <option value="ูุจูุงู">ูุจูุงู</option>
              <option value="ููุณุทูู">ููุณุทูู</option>
      </select>
    </div>
    
    <div class="field">
            <label for="trip-email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)</label>
            <input class="arhgo-input" type="email" id="trip-email" placeholder="you@email.com">
    </div>
    
    <div class="field full-width">
            <label for="trip-notes">ููุงุญุธุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
            <textarea class="arhgo-textarea" id="trip-notes" placeholder="ุฃู ุชูุงุตูู ุฅุถุงููุฉ..."></textarea>
    </div>
    
          <div class="form-actions full-width">
            <button type="button" class="btn btn-gradient" id="create-trip-btn" data-flight-sound>ุฃูุดุฆ ุงูุฎุทุฉ</button>
            <button type="button" class="btn btn-ghost" id="smart-planner-btn" data-flight-sound>ูููุฏ ุฎุทุท ุฐูู</button>
            <button type="button" class="btn btn-ghost" id="save-plan-btn">ุญูุธ ุฎุทุชู</button>
    </div>
        </form>

        <div class="glass-card glow-card" style="position: relative; z-index: 10;">
          <h3 data-translate="summary.title">ููุฎุต ุณุฑูุน</h3>
          <p data-translate="summary.desc">ูุญุณุจ ุงูุชูููุฉ ุงูุชูุฏูุฑูุฉ ููุฑูุง ููุนุฑุถ ุฑุงุจุท ูุดุงุฑูุฉ ูุตูุฑ ุนูุฏ ุงูุญูุธ.</p>
          <div class="stats-grid">
            <div class="stat-chip">
              <span id="stat-days">0</span>
              <span data-translate="summary.days">ููู ุงูุฑุญูุฉ</span>
            </div>
            <div class="stat-chip">
              <span id="stat-budget">$0</span>
              <span data-translate="summary.cost">ุงูุชูููุฉ ุงูุชูุฏูุฑูุฉ</span>
            </div>
            <div class="stat-chip">
              <span id="stat-country">โ</span>
              <span data-translate="summary.destination">ุงููุฌูุฉ</span>
            </div>
          </div>
          <hr style="border-color:rgba(255,255,255,0.08);margin:24px 0;">
          <div>
            <p class="plan-meta" data-translate="summary.shareLink">ุฑุงุจุท ุงููุดุงุฑูุฉ:</p>
            <p id="share-link" class="badge badge-info" data-translate="summary.shareLinkPlaceholder">ุณูุธูุฑ ุจุนุฏ ุงูุญูุธ</p>
            <p class="plan-meta" id="plan-status" data-translate="summary.ready">ุฌุงูุฒ ููุฅูุดุงุก โจ</p>
          </div>
        </div>
  </div>
</section>

    <section class="section split" id="destinations">
      <div class="glass-card">
        <h3 data-translate="sections.destinations.title">ุฃูุถู ุงููุฌูุงุช ุงูุขู</h3>
        <div id="destinations-tabs" class="stack"></div>
        <div id="destinations-content" class="timeline" style="margin-top:18px;"></div>
      </div>
      <div class="map-preview">
        <iframe title="ArhGo world map" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d8582251.092659855!2d16.2795226!3d46.32532945!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12b45bbb4694c1f1%3A0x8d26ab9dd98ec605!2sMediterranean%20Sea!5e0!3m2!1sen!2siq!4v1731812222000!5m2!1sen!2siq" loading="lazy" style="will-change: auto;"></iframe>
  </div>
</section>

  </main>

<footer>
    <p data-translate="footer.copyright">ArhGo ยฉ 2025 โ ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
    <p data-translate="footer.connected">ูุงุฌูุงุช ูุชุตูุฉ: <a href="hotel.html" data-flight-sound data-translate="footer.hotels">ููุงุฏู</a> โข <a href="flights.html" data-flight-sound data-translate="footer.flights">ุฑุญูุงุช ุฌููุฉ</a> โข <a href="Restuarnt.html" data-flight-sound data-translate="footer.restaurants">ูุทุงุนู</a></p>
</footer>

  <div id="toast" style="position:fixed;bottom:30px;right:30px;padding:16px 24px;border-radius:18px;background:linear-gradient(135deg, rgba(30,58,95,0.95), rgba(26,46,74,0.95));color:#fff;box-shadow:0 20px 60px rgba(192,192,192,0.3);opacity:0;transform:translateY(20px);transition:.4s;z-index:9999;border:2px solid rgba(192,192,192,0.4);"></div>

<script>
    // ูุฅุถุงูุฉ ุตูุฑุฉ ุฎูููุฉ ููู heroุ ุถุน ูุณุงุฑ ุงูุตูุฑุฉ ููุง:
    // ุงูุณุฎ ุงูุตูุฑุฉ ุฅูู ูุฌูุฏ assets/images/ ุซู ุงุณุชุฎุฏู ุงููุณุงุฑ ุงูุชุงูู:
    const heroBackgroundImage = 'assets/images/photo_2025-11-25_18-20-52.jpg'; // ุฅุฐุง ูุงูุช ุงูุตูุฑุฉ ูู ููุงู ุขุฎุฑุ ุบููุฑ ุงููุณุงุฑ ููุง
    
    const heroImages = [
      'https://images.unsplash.com/photo-1502602898657-3e91760cbb34',
      'https://images.unsplash.com/photo-1467269204594-9661b134dd2b',
      'https://images.unsplash.com/photo-1505764706515-aa95265c5abc',
      'https://images.unsplash.com/photo-1491553895911-0055eca6402d'
    ];
    let heroIndex = 0;
    const heroEl = document.querySelector('.hero');
    
    // ุฅุฐุง ูุงูุช ููุงู ุตูุฑุฉ ูุญุฏุฏุฉุ ุงุณุชุฎุฏููุง
    if (heroBackgroundImage) {
      // ุฅูุดุงุก div ูููุตู ููุตูุฑุฉ ุงูุฎูููุฉ ูุน ุชุฃุซูุฑุงุช
      const bgDiv = document.createElement('div');
      bgDiv.className = 'hero-bg-image';
      bgDiv.style.backgroundImage = `url('${heroBackgroundImage}')`;
      heroEl.insertBefore(bgDiv, heroEl.firstChild);
    } else {
      // ุงุณุชุฎุฏุงู ุตูุฑุฉ ูุงุญุฏุฉ ููุท (ุจุฏูู cycling)
      if (heroImages.length > 0) {
        heroEl.style.backgroundImage = `url('${heroImages[0]}')`;
        heroEl.style.backgroundSize = 'cover';
        heroEl.style.backgroundPosition = 'center';
      }
    }

    document.getElementById('hero-cta').addEventListener('click', () => {
      document.getElementById('planner').scrollIntoView({ behavior: 'smooth' });
    });

    const createBtn = document.getElementById('create-trip-btn');
    const smartPlannerBtn = document.getElementById('smart-planner-btn');
    const saveBtn = document.getElementById('save-plan-btn');
    const inputs = {
      name: document.getElementById('trip-name'),
      email: document.getElementById('trip-email'),
      country: document.getElementById('trip-country'),
      days: document.getElementById('trip-days'),
      tripType: document.getElementById('trip-type'),
      interests: document.getElementById('trip-interests'),
      budget: document.getElementById('trip-budget'),
      weather: document.getElementById('trip-weather'),
      scenery: document.getElementById('trip-scenery'),
      people: document.getElementById('trip-people'),
      notes: document.getElementById('trip-notes')
    };
    
    // ุญูุธ ุงูุฏููุฉ ุงููุฎุชุงุฑุฉ ูู localStorage ุนูุฏ ุชุบููุฑูุง
    if (inputs.country) {
      inputs.country.addEventListener('change', (e) => {
        if (e.target.value) {
          localStorage.setItem('selectedCountry', e.target.value);
        }
      });
    }
    
    let suggestedCountry = null;
    
    // ุชุญุฏูุซ ุงูุชุฑุงุญ ุงูุฏููุฉ ุชููุงุฆูุงู
    function updateCountrySuggestion() {
      const weather = inputs.weather.value;
      const scenery = inputs.scenery.value;
      const tripType = inputs.tripType.value;
      const budget = inputs.budget.value;
      const numPeople = parseInt(inputs.people.value) || 1;
      
      const interestsSelect = inputs.interests;
      const selectedInterests = Array.from(interestsSelect.selectedOptions).map(opt => opt.value);
      
      if (weather && scenery && tripType && budget) {
        const suggestions = suggestCountry(weather, scenery, tripType, selectedInterests, budget, numPeople);
        if (suggestions.length > 0) {
          suggestedCountry = suggestions[0].country;
          const suggestedEl = document.getElementById('suggested-country-name');
          const useBtn = document.getElementById('use-suggested-btn');
          
          suggestedEl.innerHTML = `๐ฏ ${suggestedCountry} <span style="font-size: 0.9rem; color: #B8D4F0;">(ูุทุงุจูุฉ ${suggestions[0].match}%)</span>`;
          useBtn.style.display = 'block';
        }
      } else {
        document.getElementById('suggested-country-name').textContent = 'ุงููุฃ ุงูุญููู ุฃุนูุงู ููุญุตูู ุนูู ุงูุชุฑุงุญ ุฐูู';
        document.getElementById('use-suggested-btn').style.display = 'none';
      }
    }
    
    // ุงุณุชุฎุฏุงู ุงูุฏููุฉ ุงูููุชุฑุญุฉ (ุฏุงูุฉ ุนุงูุฉ)
    window.useSuggestedCountry = function() {
      if (suggestedCountry) {
        inputs.country.value = suggestedCountry;
        localStorage.setItem('selectedCountry', suggestedCountry);
        showToast(`ุชู ุงุฎุชูุงุฑ ${suggestedCountry} ููุฌูุฉ ุฑุญูุชู โจ`);
      }
    };
    
    // ุชุบููุฑ ุงูุฎูููุฉ ุญุณุจ ุงูุฏููุฉ - ุชู ุฅุฒุงูุฉ ุงูุตูุฑุฉ
    function changeBackgroundForCountry(country) {
      // ูุง ุดูุก - ุชู ุฅุฒุงูุฉ ููุฑุฉ ุงูุตูุฑุฉ
    }
    
    // ุงุณุชูุงุน ูุชุบููุฑุงุช ุงูุญููู (debounced)
    let suggestionTimeout;
    const debouncedUpdate = () => {
      clearTimeout(suggestionTimeout);
      suggestionTimeout = setTimeout(updateCountrySuggestion, 300);
    };
    
    ['weather', 'scenery', 'tripType', 'budget', 'interests', 'people'].forEach(field => {
      if (inputs[field]) {
        inputs[field].addEventListener('change', debouncedUpdate);
      }
    });
    
    // ุญูุธ ุงูุฏููุฉ ุนูุฏ ุงุฎุชูุงุฑูุง ูุฏููุงู
    inputs.country.addEventListener('change', function() {
      const selectedCountry = this.value;
      if (selectedCountry) {
        localStorage.setItem('selectedCountry', selectedCountry);
      }
    });
    
    // ุชุญุฏูุซ ุฃููู
    updateCountrySuggestion();

    const stats = {
      days: document.getElementById('stat-days'),
      budget: document.getElementById('stat-budget'),
      country: document.getElementById('stat-country'),
      link: document.getElementById('share-link'),
      status: document.getElementById('plan-status')
    };

    const toast = document.getElementById('toast');
    const showToast = (message) => {
      toast.textContent = message;
      toast.style.opacity = '1';
      toast.style.transform = 'translateY(0)';
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateY(20px)';
      }, 3000);
    };


    const buildTripPayload = () => {
      const days = parseInt(inputs.days.value, 10) || 1;
      const tripType = inputs.tripType.value || 'ูุชูุณุทุฉ';
      let country = inputs.country.value;
      
      // ุงุณุชุฎุฏุงู ุงูุฏููุฉ ุงูููุชุฑุญุฉ ุฅุฐุง ูู ูุชู ุงุฎุชูุงุฑ ูุงุญุฏุฉ
      if (!country && suggestedCountry) {
        country = suggestedCountry;
      }
      country = country || 'ุบูุฑ ูุญุฏุฏ';
      
      const interestsSelect = inputs.interests;
      const selectedInterests = Array.from(interestsSelect.selectedOptions).map(opt => opt.value).join('ุ ');
      
      const payload = {
        name: inputs.name.value || 'ูุณุชุฎุฏู',
        email: inputs.email.value || '',
        country,
        days,
        tripType,
        interests: selectedInterests || '',
        budget: inputs.budget.value || 'ูุชูุณุทุฉ',
        weather: inputs.weather.value || '',
        scenery: inputs.scenery.value || '',
        people: parseInt(inputs.people.value) || 1,
        notes: inputs.notes.value || ''
      };
      payload.estimatedCost = calculateCost(days, tripType, payload.budget);
      return payload;
    };
    
    const calculateCost = (days, type, budget) => {
      const budgetMultiplier = budget === 'low' ? 0.5 : budget === 'high' ? 1.8 : 1;
      const normalized = (type || '').toLowerCase();
      let perDay = 120;
      if (normalized.includes('ุงูุชุตุงุฏูุฉ') || normalized.includes('budget')) perDay = 60;
      if (normalized.includes('ูุงุฎุฑุฉ') || normalized.includes('lux')) perDay = 220;
      return Math.max(1, days) * perDay * budgetMultiplier;
    };

    const updateStats = (payload, shortLink = 'ุณูุธูุฑ ุจุนุฏ ุงูุญูุธ') => {
      stats.days.textContent = payload.days;
      stats.country.textContent = payload.country;
      stats.budget.textContent = `$${payload.estimatedCost}`;
      stats.link.textContent = shortLink;
      stats.status.textContent = `ุฌุงูุฒ โ ${payload.tripType}`;
    };

  createBtn.addEventListener('click', () => {
      const payload = buildTripPayload();
      
      // ุงุณุชุฎุฏุงู ุงูุฏููุฉ ุงูููุชุฑุญุฉ ุฅุฐุง ูู ูุชู ุงุฎุชูุงุฑ ูุงุญุฏุฉ
      if (!payload.country || payload.country === 'ุบูุฑ ูุญุฏุฏ') {
        if (suggestedCountry) {
          payload.country = suggestedCountry;
          inputs.country.value = suggestedCountry;
        } else {
          alert('ูุฑุฌู ุงุฎุชูุงุฑ ูุฌูุฉ ุฃู ููุก ุงูุญููู ููุญุตูู ุนูู ุงูุชุฑุงุญ ุฐูู');
          return;
        }
      }
      
      updateStats(payload);
      
      // ุงูุงูุชูุงู ูุจุงุดุฑุฉ
      const url = `trip-summary.html?days=${payload.days}&type=${encodeURIComponent(payload.tripType)}&country=${encodeURIComponent(payload.country)}&cost=${payload.estimatedCost}`;
      if (window.ArhGo?.delayedNavigate) {
        window.ArhGo.delayedNavigate(url);
      } else {
        window.location.href = url;
      }
    });
    

    smartPlannerBtn.addEventListener('click', () => {
      const payload = buildTripPayload();
      
      // ุงุณุชุฎุฏุงู ุงูุฏููุฉ ุงูููุชุฑุญุฉ ุฅุฐุง ูู ูุชู ุงุฎุชูุงุฑ ูุงุญุฏุฉ
      if (!payload.country || payload.country === 'ุบูุฑ ูุญุฏุฏ') {
        if (suggestedCountry) {
          payload.country = suggestedCountry;
          inputs.country.value = suggestedCountry;
        } else {
          alert('ูุฑุฌู ุงุฎุชูุงุฑ ูุฌูุฉ ุฃู ููุก ุงูุญููู ููุญุตูู ุนูู ุงูุชุฑุงุญ ุฐูู');
          return;
        }
      }
      
      // ุญูุธ ุงูุฏููุฉ ุงููุฎุชุงุฑุฉ ูู localStorage
      if (payload.country) {
        localStorage.setItem('selectedCountry', payload.country);
      }
      
      const smartUrl = `smart-planner.html?country=${encodeURIComponent(payload.country)}&days=${payload.days}&interests=${encodeURIComponent(payload.interests)}&budget=${encodeURIComponent(payload.budget)}&notes=${encodeURIComponent(payload.notes)}`;
      if (window.ArhGo?.delayedNavigate) {
        window.ArhGo.delayedNavigate(smartUrl);
      } else {
        window.location.href = smartUrl;
      }
    });


    saveBtn.addEventListener('click', async () => {
      const session_token = localStorage.getItem('session_token');
      if (!session_token) {
        showToast('โ๏ธ ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู ูุญูุธ ุงูุฎุทุฉ ูู ุญุณุงุจู');
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 2000);
        return;
      }

      const payload = buildTripPayload();
      
      // ุงูุญุตูู ุนูู country_id ูู ุงุณู ุงูุฏููุฉ
      let country_id = 0;
      try {
        const baseUrl = window.location.protocol === 'file:' ? 'http://localhost/ArhGo-trip-planner/' : './';
        const countriesResponse = await fetch(baseUrl + 'api/get_countries.php');
        const countriesData = await countriesResponse.json();
        
        if (countriesData.success && countriesData.data) {
          const country = countriesData.data.find(c => 
            c.country_name_ar === payload.country || 
            c.country_name_en === payload.country
          );
          if (country) {
            country_id = country.id;
          }
        }
      } catch (error) {
        console.error('ุฎุทุฃ ูู ุงูุญุตูู ุนูู country_id:', error);
      }

      // ุฅุนุฏุงุฏ ุจูุงูุงุช ุงูุฎุทุฉ ููุฅุฑุณุงู
      const planData = {
        plan_name: `ุฑุญูุฉ ุฅูู ${payload.country}`,
        country_id: country_id,
        city_id: null, // ูููู ุฅุถุงูุชู ูุงุญูุงู
        weather_preference: payload.weather || '',
        view_preference: payload.scenery || '',
        trip_type: payload.tripType || '',
        budget: payload.budget || 'ูุชูุณุทุฉ',
        start_date: null, // ูููู ุฅุถุงูุชู ูุงุญูุงู
        end_date: null, // ูููู ุฅุถุงูุชู ูุงุญูุงู
        duration_days: payload.days || 1,
        estimated_cost: payload.estimatedCost || 0,
        interests: payload.interests ? payload.interests.split('ุ ') : [],
        activities: [],
        selected_hotels: [],
        selected_restaurants: [],
        plan_data: payload
      };

      // ุฅุธูุงุฑ ุฑุณุงูุฉ ุงูุชุญููู
      const originalText = saveBtn.textContent;
      saveBtn.disabled = true;
      saveBtn.textContent = 'ุฌุงุฑู ุงูุญูุธ...';

      try {
        const baseUrl = window.location.protocol === 'file:' ? 'http://localhost/ArhGo-trip-planner/' : './';
        
        const requestData = {
          session_token: session_token,
          plan_data: planData
        };
        
        console.log('๐ค ุฅุฑุณุงู ุจูุงูุงุช ุงูุฎุทุฉ:', requestData);
        console.log('๐ URL:', baseUrl + 'api/save_travel_plan.php');
        
        const response = await fetch(baseUrl + 'api/save_travel_plan.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(requestData)
        });

        console.log('๐ฅ ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ:', response.status, response.statusText);
        
        const result = await response.json();
        console.log('๐ฆ ุงููุชูุฌุฉ:', result);

        if (result.success) {
          console.log('โ ุชู ุญูุธ ุงูุฎุทุฉ ุจูุฌุงุญ! Plan ID:', result.plan_id);
          const shortCode = result.share_link || Math.random().toString(36).substring(2, 8).toUpperCase();
          const link = `https://arhgo.travel/r/${shortCode}`;
          updateStats(payload, link);
          showToast('โ ุชู ุญูุธ ุงูุฎุทุฉ ูู ุญุณุงุจู ูุน ุฑุงุจุท ูุตูุฑ โจ');
        } else {
          console.error('โ ูุดู ุญูุธ ุงูุฎุทุฉ:', result);
          throw new Error(result.error || 'ูุดู ุญูุธ ุงูุฎุทุฉ');
        }
      } catch (error) {
        console.error('โ ุฎุทุฃ ูู ุญูุธ ุงูุฎุทุฉ:', error);
        console.error('ุชูุงุตูู ุงูุฎุทุฃ:', {
          message: error.message,
          stack: error.stack,
          name: error.name
        });
        
        let errorMessage = 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฎุทุฉ';
        if (error.message) {
          errorMessage = error.message;
        } else if (error instanceof TypeError && error.message.includes('fetch')) {
          errorMessage = 'ูุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู. ุชุฃูุฏ ูู ุฃูู ุชุณุชุฎุฏู http://localhost';
        }
        
        showToast('โ ' + errorMessage + '\n\nุงูุชุญ Console (F12) ููุนุฑูุฉ ุงูุชูุงุตูู');
      } finally {
        saveBtn.disabled = false;
        saveBtn.textContent = originalText;
      }
    });

    const destinations = [
      { name: 'ุงูุณุนูุฏูุฉ', tips: ['ุงููุนุจุฉ ุงููุดุฑูุฉ', 'ุฌุจู ุงูููุฑ', 'ูุงุฏู ุงูุฑูุฉ', 'ูุฏุงุฆู ุตุงูุญ'] },
      { name: 'ุงูุฅูุงุฑุงุช', tips: ['ุจุฑุฌ ุฎูููุฉ', 'ุฏุจู ููู', 'ุฌุฒูุฑุฉ ุงููุฎูู', 'ูุณุฌุฏ ุงูุดูุฎ ุฒุงูุฏ'] },
      { name: 'ุงููููุช', tips: ['ุฃุจุฑุงุฌ ุงููููุช', 'ุงููุชุญู ุงููุทูู', 'ุฌุฒูุฑุฉ ููููุง', 'ุณูู ุงููุจุงุฑููุฉ'] },
      { name: 'ูุทุฑ', tips: ['ูุชุญู ุงููู ุงูุฅุณูุงูู', 'ุงููุคูุคุฉ ูุทุฑ', 'ุณูู ูุงูู', 'ููุฑููุด ุงูุฏูุญุฉ'] },
      { name: 'ุงูุจุญุฑูู', tips: ['ุดุฌุฑุฉ ุงูุญูุงุฉ', 'ููุนุฉ ุงูุจุญุฑูู', 'ุณูู ุงูููุงูุฉ', 'ุฌุณุฑ ุงูููู ููุฏ'] },
      { name: 'ุนููุงู', tips: ['ููุนุฉ ูุฒูู', 'ูุงุฏู ุดุงุจ', 'ุฌุจู ุดูุณ', 'ุณูู ูุทุฑุญ'] },
      { name: 'ุงูููู', tips: ['ุตูุนุงุก ุงููุฏููุฉ', 'ุฌุฒูุฑุฉ ุณูุทุฑู', 'ุดุจุงู ุญุถุฑููุช', 'ุฌุจู ุตุจุฑ'] },
      { name: 'ุงูุนุฑุงู', tips: ['ุจุงุจู ุงูุฃุซุฑูุฉ', 'ุงููุณุฌุฏ ุงููุงุธูู', 'ุฃููุงุฑ ุงูุฌููุจ', 'ุฒููุฑุฉ ุฃูุฑ'] },
      { name: 'ุณูุฑูุง', tips: ['ููุนุฉ ุญูุจ', 'ุชุฏูุฑ ุงูุฃุซุฑูุฉ', 'ุงููุณุฌุฏ ุงูุฃููู', 'ุจุตุฑู ุงูุดุงู'] },
      { name: 'ุงูุฃุฑุฏู', tips: ['ุงูุจุชุฑุงุก', 'ูุงุฏู ุฑู', 'ุงูุจุญุฑ ุงูููุช', 'ููุนุฉ ุนูุงู'] },
      { name: 'ูุจูุงู', tips: ['ุฌูููู', 'ุจูุช ุงูุฏูู', 'ุบุงุจุฉ ุงูุฃุฑุฒ', 'ุตูุฏุง ุงููุฏููุฉ'] },
      { name: 'ููุณุทูู', tips: ['ุงููุณุฌุฏ ุงูุฃูุตู', 'ูููุณุฉ ุงูููุฏ', 'ุงูุจุญุฑ ุงูููุช', 'ุฌุจู ุงูุฒูุชูู'] }
    ];

    const tabs = document.getElementById('destinations-tabs');
    const content = document.getElementById('destinations-content');

    const renderDestination = (index) => {
      const dest = destinations[index];
      content.innerHTML = dest.tips.map(t => `<div class="timeline-step" translate="yes">${t}</div>`).join('');
      
    };

    destinations.forEach((dest, index) => {
      const btn = document.createElement('button');
      btn.className = 'btn btn-ghost';
      btn.setAttribute('translate', 'yes');
      btn.textContent = dest.name;
      btn.addEventListener('click', () => renderDestination(index));
      tabs.appendChild(btn);
    });
    renderDestination(0);

    fetch('http://localhost:3033/flights')
  .then(res => res.json())
  .then(data => {
        if (!Array.isArray(data) || !data.length) return;
        showToast('ุชู ุชูุนูู ุขุฎุฑ ุชุญุฏูุซ ูุฃุณุนุงุฑ ุงูุฑุญูุงุช โ๏ธ');
      })
      .catch(() => {});

    // ูุธุงู ุงูุชูุตูุงุช ุงูุฐูู
    function generateRecommendations() {
      const plans = [];
      const recommendationsGrid = document.getElementById('recommendationsGrid');
      
      if (!recommendationsGrid) return;
      
      // ุชุญููู ุงูุงูุชูุงูุงุช ูู ุงูุฎุทุท ุงูุณุงุจูุฉ
      const interests = {};
      const destinations = {};
      const budgets = [];
      
      plans.forEach(plan => {
        if (plan.interests) {
          plan.interests.split(',').forEach(i => {
            const interest = i.trim();
            interests[interest] = (interests[interest] || 0) + 1;
          });
        }
        destinations[plan.country] = (destinations[plan.country] || 0) + 1;
        if (plan.estimatedCost) budgets.push(plan.estimatedCost);
      });
      
      const topInterests = Object.entries(interests).sort((a, b) => b[1] - a[1]).slice(0, 3).map(e => e[0]);
      const avgBudget = budgets.length > 0 ? budgets.reduce((a, b) => a + b, 0) / budgets.length : 500;
      
      // ุชูููุฏ ุชูุตูุงุช ูุฎุตุตุฉ
      const recommendations = [
        {
          title: 'ูุฌูุงุช ูุดุงุจูุฉ ูุงูุชูุงูุงุชู',
          description: `ุจูุงุกู ุนูู ุงูุชูุงูุงุชู (${topInterests.join('ุ ')})ุ ููุตู ุจูุฐู ุงููุฌูุงุช`,
          items: ['ุงููุงุจุงู', 'ุฅูุทุงููุง', 'ุฅุณุจุงููุง'],
          icon: '๐',
          color: '#C9B27A'
        },
        {
          title: 'ุนุฑูุถ ุชูุงุณุจ ููุฒุงููุชู',
          description: `ุนุฑูุถ ุฎุงุตุฉ ุจุฃุณุนุงุฑ ุชุจุฏุฃ ูู $${Math.round(avgBudget * 0.8)}`,
          items: ['ุชุงููุงูุฏ', 'ุงููุบุฑุจ', 'ุชุฑููุง'],
          icon: '๐ฐ',
          color: '#10B981'
        },
        {
          title: 'ูุฌูุงุช ุฌุฏูุฏุฉ ูุงูุชุดุงููุง',
          description: 'ูุฌูุงุช ุดุงุฆุนุฉ ูุฏ ุชููู ุจูุงุกู ุนูู ุงุชุฌุงูุงุช ุงูุณูุฑ',
          items: ['ุฃูุณููุฏุง', 'ูููุฒูููุฏุง', 'ูุฑูุงุชูุง'],
          icon: 'โจ',
          color: '#8EA2B6'
        }
      ];
      
      recommendationsGrid.innerHTML = recommendations.map(rec => `
        <article class="glass-card floating-card">
          <div style="font-size: 3rem; margin-bottom: 16px;">${rec.icon}</div>
          <h3 style="color: #0A1C2E; margin-bottom: 12px;">${rec.title}</h3>
          <p style="color: #B8D4F0; margin-bottom: 20px; line-height: 1.6;">${rec.description}</p>
          <div style="display: flex; flex-wrap: wrap; gap: 8px;">
            ${rec.items.map(item => `
              <span class="badge badge-info" style="background: ${rec.color}; color: #fff;">
                ${item}
              </span>
            `).join('')}
          </div>
          <button class="btn btn-gradient" style="width: 100%; margin-top: 20px;" onclick="exploreDestination('${rec.items[0]}')">
            ุงุณุชูุดู ${rec.items[0]}
          </button>
        </article>
      `).join('');
    }
    
    function exploreDestination(destination) {
      document.getElementById('trip-country').value = destination;
      document.getElementById('planner').scrollIntoView({ behavior: 'smooth' });
    }
    
</script>
  <!-- ุฒุฑ ุชุฑุฌูุฉ ูุชุนุฏุฏ ุงููุบุงุช -->
  <div id="google_translate_element" style="position: fixed; top: 700px; left: 20px; z-index: 9999; min-width: 110px; min-height: 55px;"></div>

  <script type="text/javascript">
    // ุชุนุฑูู ุงูุฏุงูุฉ ูุจู ุชุญููู ุงูุณูุฑูุจุช
    window.googleTranslateElementInit = function() {
      try {
        if (typeof google !== 'undefined' && google.translate && google.translate.TranslateElement) {
          new google.translate.TranslateElement({
            pageLanguage: 'ar',
            includedLanguages: 'af,sq,am,ar,hy,az,eu,be,bn,bg,ca,ceb,ny,zh-CN,zh-TW,hr,cs,da,nl,en,eo,et,tl,fi,fr,gl,ka,de,el,gu,ht,ha,haw,iw,hi,hmn,hu,is,ig,id,ga,it,ja,jw,kn,kk,km,ko,ku,ky,lo,la,lv,lt,lb,mk,mg,ms,ml,mt,mi,mr,mn,my,nรฉ,no,fa,pl,pt,pa,ro,ru,sm,gd,sr,st,si,sk,sl,so,es,su,sw,sv,tg,ta,te,th,tr,uk,ur,uz,vi,cy,xh,yi,yo,zu',
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE
          }, 'google_translate_element');
        }
      } catch(e) {
        console.error('ุฎุทุฃ ูู ุชุญููู Google Translate:', e);
      }
    };
    
    // ุชุญููู ุณูุฑูุจุช ุงูุชุฑุฌูุฉ ุจุนุฏ ุชุญููู ุงูุตูุญุฉ
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadTranslateScript);
    } else {
      loadTranslateScript();
    }
    
    function loadTranslateScript() {
      // ุงูุชุญูู ูู ุนุฏู ุชุญููู ุงูุณูุฑูุจุช ูุณุจูุงู
      if (document.querySelector('script[src*="translate.google.com"]')) {
        return;
      }
      
      const script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = 'https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
      script.async = true;
      script.onerror = function() {
        console.error('ูุดู ุชุญููู ุณูุฑูุจุช Google Translate');
      };
      document.head.appendChild(script);
    }
  </script>
  <script>
    // ุงูุชุญูู ูู ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู ูุนุฑุถูุง
    function updateAuthUI() {
      // ุงูุชุญูู ูู localStorage ูุจุงุดุฑุฉ ุฃููุงู
      const currentUser = localStorage.getItem('arhgo_current_user');
      const loggedIn = localStorage.getItem('loggedIn');
      
      const authButtons = document.getElementById('authButtons');
      const userProfile = document.getElementById('userProfile');
      const userNameDisplay = document.getElementById('userNameDisplay');
      
      // ุฅุฐุง ูุงู ููุงู ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู ูู localStorage
      if (currentUser || loggedIn) {
        // ูุญุงููุฉ ุงุณุชุฎุฏุงู userAuth ุฅุฐุง ูุงู ูุชุงุญุงู
        if (typeof userAuth !== 'undefined') {
          try {
            const isLoggedIn = userAuth.isLoggedIn();
            if (isLoggedIn) {
              const user = userAuth.getCurrentUser();
              if (user) {
                if (authButtons) authButtons.style.display = 'none';
                if (userProfile) {
                  userProfile.style.display = 'flex';
                  if (userNameDisplay) {
                    userNameDisplay.textContent = `๐ค ${user.fullname || user.username || currentUser || loggedIn}`;
                  }
                }
                return;
              }
            }
          } catch (error) {
            console.error('Error with userAuth:', error);
          }
        }
        
        // ุฅุฐุง ูู ููู userAuth ูุชุงุญุงูุ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู localStorage ูุจุงุดุฑุฉ
        if (authButtons) authButtons.style.display = 'none';
        if (userProfile) {
          userProfile.style.display = 'flex';
          if (userNameDisplay) {
            // ูุญุงููุฉ ุงูุญุตูู ุนูู ุงุณู ุงููุณุชุฎุฏู ูู localStorage
            const allUsers = JSON.parse(localStorage.getItem('arhgo_users') || '[]');
            const user = allUsers.find(u => u.username === (currentUser || loggedIn));
            const displayName = user ? (user.fullname || user.username) : (currentUser || loggedIn);
            userNameDisplay.textContent = `๐ค ${displayName}`;
          }
        }
      } else {
        // ูุง ููุฌุฏ ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู
        if (authButtons) authButtons.style.display = 'flex';
        if (userProfile) userProfile.style.display = 'none';
      }
    }

    // ุชุญุฏูุซ ููุฑู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
    (function initAuthUI() {
      // ุชุญุฏูุซ ููุฑู
      updateAuthUI();
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          updateAuthUI();
          // ุชุญุฏูุซ ูุฑุฉ ูุงุญุฏุฉ ุจุนุฏ 500ms
          setTimeout(() => {
            updateAuthUI();
          }, 500);
        });
      } else {
        // ุชุญุฏูุซ ูุฑุฉ ูุงุญุฏุฉ ุจุนุฏ 500ms
        setTimeout(() => {
          updateAuthUI();
        }, 500);
      }
    })();
    
    // ุชุญุฏูุซ ุนูุฏ ุชุบููุฑ localStorage (ูู ูุงูุฐุฉ ุฃุฎุฑู)
    window.addEventListener('storage', () => {
      setTimeout(updateAuthUI, 50);
    });
    
    // ุชุญุฏูุซ ุนูุฏ ุงูุชุฑููุฒ ุนูู ุงููุงูุฐุฉ
    window.addEventListener('focus', updateAuthUI);
    
    // ุชุญุฏูุซ ุนูุฏ ุชุญููู ุงูุตูุญุฉ ูู cache
    window.addEventListener('pageshow', (event) => {
      if (event.persisted) {
        updateAuthUI();
      }
    });
    
    // ุชุญุฏูุซ ุนูุฏ ุงูุงูุชูุงู ูู ุตูุญุฉ ุฃุฎุฑู
    if (performance.navigation.type === 1) {
      setTimeout(updateAuthUI, 100);
    }
  </script>
</body>
</html>