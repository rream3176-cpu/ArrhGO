<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø³ÙŠØ· - ArhGo</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #1a1f2e; color: #fff; direction: rtl; }
        button { padding: 15px 30px; margin: 10px; background: #37D6C0; color: #1a1f2e; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; }
        button:hover { background: #2fb8a0; }
        #result { margin-top: 20px; padding: 20px; background: rgba(0,0,0,0.5); border-radius: 8px; white-space: pre-wrap; }
        .success { color: #51cf66; }
        .error { color: #ff6b6b; }
        input { padding: 10px; margin: 5px; width: 250px; border-radius: 5px; border: 2px solid #37D6C0; background: rgba(255,255,255,0.1); color: #fff; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø³ÙŠØ· - ArhGo</h1>
    
    <div>
        <h2>1. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" value="adffdddr@gmail.com">
        <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button onclick="testLogin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    </div>
    
    <div>
        <h2>2. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</h2>
        <button onclick="testHotel()">Ø­Ø¬Ø² ÙÙ†Ø¯Ù‚</button>
        <button onclick="testRestaurant()">Ø­Ø¬Ø² Ù…Ø·Ø¹Ù…</button>
        <button onclick="testFlight()">Ø­Ø¬Ø² Ø±Ø­Ù„Ø©</button>
        <button onclick="testPlan()">Ø­ÙØ¸ Ø®Ø·Ø©</button>
    </div>
    
    <div>
        <h2>3. Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
        <button onclick="checkBookings()">Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</button>
    </div>
    
    <div id="result"></div>
    
    <script>
        let sessionToken = '';
        
        async function testLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const result = document.getElementById('result');
            
            result.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...';
            
            try {
                const response = await fetch('api/login.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                result.innerHTML = JSON.stringify(data, null, 2);
                
                if (data.success) {
                    sessionToken = data.session_token;
                    localStorage.setItem('session_token', sessionToken);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    result.innerHTML += '\n\nâœ… ØªÙ… Ø­ÙØ¸ Session Token ÙÙŠ localStorage';
                }
            } catch (error) {
                result.innerHTML = 'âŒ Ø®Ø·Ø£: ' + error.message;
            }
        }
        
        async function testHotel() {
            if (!sessionToken) sessionToken = localStorage.getItem('session_token');
            if (!sessionToken) {
                document.getElementById('result').innerHTML = 'âŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹';
                return;
            }
            
            const result = document.getElementById('result');
            result.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø­Ø¬Ø² Ø§Ù„ÙÙ†Ø¯Ù‚...';
            
            try {
                const response = await fetch('api/book_hotel.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_token: sessionToken,
                        hotel_id: 1,
                        check_in_date: '2025-12-20',
                        check_out_date: '2025-12-22',
                        guests: 2,
                        rooms: 1,
                        special_requests: 'Ø§Ø®ØªØ¨Ø§Ø±'
                    })
                });
                
                const data = await response.json();
                result.innerHTML = JSON.stringify(data, null, 2);
            } catch (error) {
                result.innerHTML = 'âŒ Ø®Ø·Ø£: ' + error.message;
            }
        }
        
        async function testRestaurant() {
            if (!sessionToken) sessionToken = localStorage.getItem('session_token');
            if (!sessionToken) {
                document.getElementById('result').innerHTML = 'âŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹';
                return;
            }
            
            const result = document.getElementById('result');
            result.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø¹Ù…...';
            
            try {
                const response = await fetch('api/book_restaurant.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_token: sessionToken,
                        restaurant_id: 1,
                        booking_date: '2025-12-20',
                        booking_time: '19:00:00',
                        guests: 2,
                        special_requests: 'Ø§Ø®ØªØ¨Ø§Ø±'
                    })
                });
                
                const data = await response.json();
                result.innerHTML = JSON.stringify(data, null, 2);
            } catch (error) {
                result.innerHTML = 'âŒ Ø®Ø·Ø£: ' + error.message;
            }
        }
        
        async function testFlight() {
            if (!sessionToken) sessionToken = localStorage.getItem('session_token');
            if (!sessionToken) {
                document.getElementById('result').innerHTML = 'âŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹';
                return;
            }
            
            const result = document.getElementById('result');
            result.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø­Ø¬Ø² Ø§Ù„Ø±Ø­Ù„Ø©...';
            
            try {
                const response = await fetch('api/book_flight.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_token: sessionToken,
                        from_city: 'Ø¨ØºØ¯Ø§Ø¯',
                        to_city: 'Ø¯Ø¨ÙŠ',
                        departure_date: '2025-12-25',
                        return_date: null,
                        passengers: 1,
                        class_type: 'Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©',
                        special_requests: 'Ø§Ø®ØªØ¨Ø§Ø±'
                    })
                });
                
                const data = await response.json();
                result.innerHTML = JSON.stringify(data, null, 2);
            } catch (error) {
                result.innerHTML = 'âŒ Ø®Ø·Ø£: ' + error.message;
            }
        }
        
        async function testPlan() {
            if (!sessionToken) sessionToken = localStorage.getItem('session_token');
            if (!sessionToken) {
                document.getElementById('result').innerHTML = 'âŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹';
                return;
            }
            
            const result = document.getElementById('result');
            result.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ø®Ø·Ø©...';
            
            try {
                const response = await fetch('api/save_travel_plan.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_token: sessionToken,
                        plan_data: {
                            plan_name: 'Ø±Ø­Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø±',
                            country_id: 1,
                            city_id: null,
                            weather_preference: 'Ø¯Ø§ÙØ¦',
                            view_preference: 'Ø³Ø§Ø­Ù„ÙŠ',
                            trip_type: 'Ù…ØªÙˆØ³Ø·Ø©',
                            budget: 'Ù…ØªÙˆØ³Ø·Ø©',
                            duration_days: 5,
                            estimated_cost: 500,
                            interests: ['Ø³ÙŠØ§Ø­Ø©'],
                            activities: [],
                            selected_hotels: [],
                            selected_restaurants: []
                        }
                    })
                });
                
                const data = await response.json();
                result.innerHTML = JSON.stringify(data, null, 2);
            } catch (error) {
                result.innerHTML = 'âŒ Ø®Ø·Ø£: ' + error.message;
            }
        }
        
        async function checkBookings() {
            if (!sessionToken) sessionToken = localStorage.getItem('session_token');
            if (!sessionToken) {
                document.getElementById('result').innerHTML = 'âŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹';
                return;
            }
            
            const result = document.getElementById('result');
            result.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª...';
            
            try {
                const response = await fetch('api/get_user_bookings.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ session_token: sessionToken })
                });
                
                const data = await response.json();
                result.innerHTML = JSON.stringify(data, null, 2);
            } catch (error) {
                result.innerHTML = 'âŒ Ø®Ø·Ø£: ' + error.message;
            }
        }
    </script>
</body>
</html>

