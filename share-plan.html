<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArhGo | Ø®Ø·Ø© Ø³ÙØ± Ù…Ø´ØªØ±ÙƒØ©</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/arhgo.css">
  <script src="assets/js/arhgo.js" defer></script>
  <script src="assets/js/countries-database.js"></script>
  <script src="assets/js/plan-manager.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    body {
      background: var(--bg-primary);
      padding-top: 80px;
    }
    
    .share-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: var(--spacing-xl) var(--spacing-lg);
    }
    
    .share-header {
      text-align: center;
      margin-bottom: var(--spacing-xl);
      color: var(--text-primary);
    }
    
    .share-header h1 {
      font-size: 2.5rem;
      margin-bottom: var(--spacing-md);
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }
    
    .share-badge {
      display: inline-block;
      padding: 12px 24px;
      background: rgba(0, 229, 255, 0.1);
      border-radius: var(--radius-md);
      border: 1px solid var(--glass-border);
      color: var(--neon-cyan);
      font-weight: 700;
      margin-bottom: var(--spacing-md);
      box-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
    }
    
    .info-card {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      -webkit-backdrop-filter: var(--glass-blur);
      border-radius: var(--radius-xl);
      padding: var(--spacing-xl);
      border: 2px solid rgba(55, 214, 192, 0.5);
      box-shadow: 0 20px 60px rgba(14, 31, 51, 0.4), 0 0 30px rgba(55, 214, 192, 0.2);
      backdrop-filter: blur(20px);
      margin-bottom: 24px;
    }
    
    .day-plan {
      background: linear-gradient(135deg, rgba(30, 74, 111, 0.75), rgba(22, 58, 95, 0.85));
      border-radius: 24px;
      padding: 32px;
      margin-bottom: 24px;
      border: 2px solid rgba(55, 214, 192, 0.5);
      box-shadow: 0 20px 60px rgba(14, 31, 51, 0.4), 0 0 30px rgba(55, 214, 192, 0.2);
      backdrop-filter: blur(20px);
    }
    
    .error-message {
      text-align: center;
      padding: 40px;
      background: linear-gradient(135deg, rgba(30, 74, 111, 0.75), rgba(22, 58, 95, 0.85));
      border-radius: 24px;
      border: 2px solid rgba(255, 107, 107, 0.5);
      color: #FF6B6B;
      font-size: 1.2rem;
      font-weight: 700;
      margin: 40px auto;
      max-width: 600px;
    }
    
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(14, 31, 51, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      color: #F2F9FF;
    }
    
    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(55, 214, 192, 0.3);
      border-top-color: #37D6C0;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="page-hidden">
  <nav class="arhgo-nav">
    <div class="arhgo-logo">ArhGo</div>
    <ul>
      <li><a data-nav href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a data-nav href="analytics.html">Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</a></li>
      <li><a data-nav href="budget-manager.html">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</a></li>
      <li><a data-nav href="price-comparison.html">Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</a></li>
      <li><a data-nav href="smart-alerts.html">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</a></li>
    </ul>
  </nav>

  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <h2>Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·Ø©...</h2>
  </div>

  <main class="share-container">
    <div class="share-header">
      <h1>Ø®Ø·Ø© Ø³ÙØ± Ù…Ø´ØªØ±ÙƒØ©</h1>
      <div class="share-badge">ğŸ”— Ø®Ø·Ø© Ù…Ø´ØªØ±ÙƒØ© Ù…Ù† ArhGo</div>
    </div>

    <div id="planContent"></div>
  </main>

  <script>
    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù Ø§Ù„Ø®Ø·Ø© Ù…Ù† URL
    const urlParams = new URLSearchParams(window.location.search);
    const planId = urlParams.get('id');

    // ØªØ­Ù…ÙŠÙ„ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø©
    async function loadSharedPlan() {
      if (!planId) {
        showError('Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø±Ù Ø§Ù„Ø®Ø·Ø©');
        return;
      }

      const plan = planManager.getPlan(planId);

      if (!plan) {
        showError('Ø§Ù„Ø®Ø·Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© Ø£Ùˆ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØªÙ‡Ø§');
        return;
      }

      // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
      document.getElementById('loadingOverlay').style.display = 'none';

      // Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø©
      displayPlan(plan);
    }

    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
    function showError(message) {
      document.getElementById('loadingOverlay').style.display = 'none';
      document.getElementById('planContent').innerHTML = `
        <div class="error-message">
          <div style="font-size: 3rem; margin-bottom: 16px;">âš ï¸</div>
          <div>${message}</div>
          <a href="index.html" style="display: inline-block; margin-top: 24px; padding: 12px 32px; 
            background: linear-gradient(135deg, #37D6C0, #4CA8FF); color: #0E1F33; 
            border-radius: 12px; text-decoration: none; font-weight: 700;">
            Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
          </a>
        </div>
      `;
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø© (Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† smart-planner.html)
    function displayPlan(planData) {
      const { country, days, budget, interests, plan, totalCost, avgDailyCost, totalActivities } = planData;
      
      // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ø­Ù„Ø©
      const countryData = getCountryData(country);
      const weatherInfo = {
        'Ù…Ø´Ù…Ø³': 'â˜€ï¸ Ù…Ø´Ù…Ø³ - Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©',
        'Ù…Ø¹ØªØ¯Ù„': 'â˜ï¸ Ù…Ø¹ØªØ¯Ù„ - Ø¬Ùˆ Ù„Ø·ÙŠÙ ÙˆÙ…Ø±ÙŠØ­',
        'Ø¨Ø§Ø±Ø¯': 'â„ï¸ Ø¨Ø§Ø±Ø¯ - Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø§Ø±ØªØ¯Ø§Ø¡ Ù…Ù„Ø§Ø¨Ø³ Ø¯Ø§ÙØ¦Ø©',
        'Ù…Ù…Ø·Ø±': 'ğŸŒ§ï¸ Ù…Ù…Ø·Ø± - Ø§Ø­Ù…Ù„ Ù…Ø¸Ù„Ø© Ù…Ø¹Ùƒ'
      };
      
      let content = `
        <div class="info-card">
          <h3 style="color: #37D6C0; margin-bottom: 20px; text-shadow: 0 2px 8px rgba(14, 31, 51, 0.6);">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ø­Ù„Ø©</h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
            <div style="background: linear-gradient(135deg, rgba(55, 214, 192, 0.2), rgba(76, 168, 255, 0.2)); padding: 20px; border-radius: 16px; border: 2px solid rgba(55, 214, 192, 0.4);">
              <div style="font-size: 2rem; margin-bottom: 8px;">ğŸŒ</div>
              <div style="font-size: 1.1rem; font-weight: 700; color: #37D6C0; margin-bottom: 4px; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">Ø§Ù„ÙˆØ¬Ù‡Ø©</div>
              <div style="font-size: 1.3rem; color: #37D6C0; font-weight: 800; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${country}</div>
            </div>
            <div style="background: linear-gradient(135deg, rgba(55, 214, 192, 0.2), rgba(76, 168, 255, 0.2)); padding: 20px; border-radius: 16px; border: 2px solid rgba(55, 214, 192, 0.4);">
              <div style="font-size: 2rem; margin-bottom: 8px;">ğŸ“…</div>
              <div style="font-size: 1.1rem; font-weight: 700; color: #37D6C0; margin-bottom: 4px; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">Ù…Ø¯Ø© Ø§Ù„Ø±Ø­Ù„Ø©</div>
              <div style="font-size: 1.3rem; color: #37D6C0; font-weight: 800; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${days} ${days === 1 ? 'ÙŠÙˆÙ…' : 'Ø£ÙŠØ§Ù…'}</div>
            </div>
            <div style="background: linear-gradient(135deg, rgba(55, 214, 192, 0.2), rgba(76, 168, 255, 0.2)); padding: 20px; border-radius: 16px; border: 2px solid rgba(55, 214, 192, 0.4);">
              <div style="font-size: 2rem; margin-bottom: 8px;">ğŸ’°</div>
              <div style="font-size: 1.1rem; font-weight: 700; color: #37D6C0; margin-bottom: 4px; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</div>
              <div style="font-size: 1.2rem; color: #4DFFD1; font-weight: 700; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${budget === 'low' ? 'ğŸ’µ Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©' : budget === 'medium' ? 'ğŸ’¶ Ù…ØªÙˆØ³Ø·Ø©' : 'ğŸ’ ÙØ§Ø®Ø±Ø©'}</div>
            </div>
            <div style="background: linear-gradient(135deg, rgba(55, 214, 192, 0.2), rgba(76, 168, 255, 0.2)); padding: 20px; border-radius: 16px; border: 2px solid rgba(55, 214, 192, 0.4);">
              <div style="font-size: 2rem; margin-bottom: 8px;">ğŸ“Š</div>
              <div style="font-size: 1.1rem; font-weight: 700; color: #37D6C0; margin-bottom: 4px; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</div>
              <div style="font-size: 1.3rem; color: #4DFFD1; font-weight: 800; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">$${Math.round(totalCost)}</div>
            </div>
          </div>
        </div>
      `;

      // Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† smart-planner.html)
      // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³Ø£Ø³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ smart-planner.html Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
      // Ù„ÙƒÙ† Ø³Ø£Ø¨Ø³Ø·Ù‡ Ù‡Ù†Ø§ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
      
      plan.forEach((day, index) => {
        content += `
          <div class="day-plan">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 2px solid rgba(55, 214, 192, 0.4);">
              <div>
                <div style="font-size: 2.5rem; font-weight: 800; background: linear-gradient(135deg, #37D6C0, #4DFFD1); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Ø§Ù„ÙŠÙˆÙ… ${day.day}</div>
                <p style="color: #F2F9FF; margin-top: 8px; font-size: 1.2rem; font-weight: 600; text-shadow: 0 2px 8px rgba(14, 31, 51, 0.6);">ğŸ“ ${day.city}</p>
              </div>
              <div style="text-align: left; background: rgba(55, 214, 192, 0.15); padding: 16px 24px; border-radius: 12px; border: 2px solid rgba(55, 214, 192, 0.4);">
                <div style="font-size: 2rem; font-weight: 800; color: #F2F9FF; text-shadow: 0 2px 8px rgba(14, 31, 51, 0.6);">$${Math.round(day.totalCost)}</div>
                <div style="color: #B8D4F0; font-size: 0.95rem; margin-top: 4px; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</div>
              </div>
            </div>
            
            <div style="margin-top: 24px;">
              <h4 style="color: #37D6C0; margin-bottom: 16px; font-size: 1.4rem; font-weight: 700; text-shadow: 0 2px 8px rgba(14, 31, 51, 0.6);">ğŸŒ… Ø§Ù„ØµØ¨Ø§Ø­</h4>
              ${day.morning.map(activity => `
                <div style="padding: 16px; margin: 12px 0; background: linear-gradient(135deg, rgba(30, 74, 111, 0.5), rgba(22, 58, 95, 0.6)); border-radius: 12px; border: 1px solid rgba(55, 214, 192, 0.3);">
                  <div style="color: #F2F9FF; font-weight: 700; font-size: 1.1rem; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${activity.name || 'Ù†Ø´Ø§Ø·'}</div>
                  ${activity.description ? `<div style="color: #B8D4F0; margin-top: 8px; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${activity.description}</div>` : ''}
                </div>
              `).join('')}
            </div>
            
            <div style="margin-top: 24px;">
              <h4 style="color: #37D6C0; margin-bottom: 16px; font-size: 1.4rem; font-weight: 700; text-shadow: 0 2px 8px rgba(14, 31, 51, 0.6);">â˜€ï¸ Ø§Ù„Ø¸Ù‡Ø±</h4>
              ${day.afternoon.map(activity => `
                <div style="padding: 16px; margin: 12px 0; background: linear-gradient(135deg, rgba(30, 74, 111, 0.5), rgba(22, 58, 95, 0.6)); border-radius: 12px; border: 1px solid rgba(55, 214, 192, 0.3);">
                  <div style="color: #F2F9FF; font-weight: 700; font-size: 1.1rem; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${activity.name || 'Ù†Ø´Ø§Ø·'}</div>
                  ${activity.description ? `<div style="color: #B8D4F0; margin-top: 8px; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${activity.description}</div>` : ''}
                </div>
              `).join('')}
            </div>
            
            <div style="margin-top: 24px;">
              <h4 style="color: #37D6C0; margin-bottom: 16px; font-size: 1.4rem; font-weight: 700; text-shadow: 0 2px 8px rgba(14, 31, 51, 0.6);">ğŸŒ™ Ø§Ù„Ù…Ø³Ø§Ø¡</h4>
              ${day.evening.map(activity => `
                <div style="padding: 16px; margin: 12px 0; background: linear-gradient(135deg, rgba(30, 74, 111, 0.5), rgba(22, 58, 95, 0.6)); border-radius: 12px; border: 1px solid rgba(55, 214, 192, 0.3);">
                  <div style="color: #F2F9FF; font-weight: 700; font-size: 1.1rem; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${activity.name || 'Ù†Ø´Ø§Ø·'}</div>
                  ${activity.description ? `<div style="color: #B8D4F0; margin-top: 8px; text-shadow: 0 1px 4px rgba(14, 31, 51, 0.5);">${activity.description}</div>` : ''}
                </div>
              `).join('')}
            </div>
          </div>
        `;
      });

      document.getElementById('planContent').innerHTML = content;
    }

    // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙˆÙ„Ø© (Ù…Ù† countries-database.js)
    function getCountryData(country) {
      if (typeof countriesDatabase !== 'undefined' && countriesDatabase[country]) {
        return countriesDatabase[country];
      }
      return {};
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('DOMContentLoaded', loadSharedPlan);
  </script>
</body>
</html>

