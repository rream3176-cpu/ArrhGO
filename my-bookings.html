<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArhGo | Ø­Ø¬ÙˆØ²Ø§ØªÙŠ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/arhgo.css">
  <script src="assets/js/arhgo.js" defer></script>
  <style>
    body {
      background: var(--bg-primary);
      padding-top: 80px;
    }
    
    .glass-card {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .bookings-tabs {
      display: flex;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-lg);
      flex-wrap: wrap;
      justify-content: center;
    }
    .tab-btn {
      padding: 12px 24px;
      border: 1px solid rgba(0, 229, 255, 0.2);
      background: linear-gradient(135deg, rgba(20, 27, 45, 0.6) 0%, rgba(15, 22, 36, 0.7) 100%);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      color: var(--neon-cyan);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      font-family: var(--font-primary);
    }
    .tab-btn:hover {
      background: linear-gradient(135deg, rgba(20, 27, 45, 0.8) 0%, rgba(15, 22, 36, 0.9) 100%);
      border-color: rgba(0, 229, 255, 0.4);
      transform: translateY(-2px);
    }
    .tab-btn.active {
      background: linear-gradient(135deg, rgba(0, 229, 255, 0.15) 0%, rgba(0, 207, 200, 0.15) 100%);
      border-color: rgba(0, 229, 255, 0.5);
      box-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
    }
    
    /* ØªØ­Ø³ÙŠÙ† container Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª */
    #bookingsContainer.grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: var(--spacing-lg);
      margin-top: var(--spacing-xl);
    }
    
    .booking-card {
      border-radius: var(--radius-lg);
      padding: var(--spacing-lg);
      background: linear-gradient(135deg, rgba(20, 27, 45, 0.8) 0%, rgba(15, 22, 36, 0.9) 100%);
      backdrop-filter: blur(30px) saturate(200%);
      -webkit-backdrop-filter: blur(30px) saturate(200%);
      border: 1px solid rgba(0, 229, 255, 0.2);
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(0, 229, 255, 0.1),
        inset 0 1px 1px rgba(255, 255, 255, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .booking-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(0, 229, 255, 0.6) 20%, 
        rgba(0, 207, 200, 0.6) 50%, 
        rgba(0, 229, 255, 0.6) 80%, 
        transparent 100%);
      opacity: 0;
      transition: opacity 0.4s ease;
    }
    
    .booking-card:hover {
      transform: translateY(-6px);
      box-shadow: 
        0 30px 80px rgba(0, 0, 0, 0.5),
        0 0 60px rgba(0, 229, 255, 0.3),
        inset 0 1px 1px rgba(255, 255, 255, 0.15);
      border-color: rgba(0, 229, 255, 0.5);
    }
    
    .booking-card:hover::before {
      opacity: 1;
    }
    .booking-header {
      display: flex;
      justify-content: space-between;
      align-items: start;
      margin-bottom: var(--spacing-sm);
      flex-wrap: wrap;
      gap: var(--spacing-xs);
    }
    .booking-title {
      font-size: 1.3rem;
      color: var(--neon-cyan);
      margin: 0;
      font-weight: 700;
      line-height: 1.3;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .booking-status {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }
    .status-confirmed {
      background: rgba(16, 185, 129, 0.1);
      color: #10B981;
      border: 1px solid rgba(16, 185, 129, 0.3);
    }
    .status-pending {
      background: rgba(251, 191, 36, 0.1);
      color: #FBBF24;
      border: 1px solid rgba(251, 191, 36, 0.3);
    }
    .status-cancelled {
      background: rgba(239, 68, 68, 0.1);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }
    .status-completed {
      background: rgba(59, 130, 246, 0.2);
      color: #3B82F6;
      border: 1px solid rgba(59, 130, 246, 0.3);
    }
    .booking-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: var(--spacing-sm);
      margin: var(--spacing-sm) 0;
    }
    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .detail-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      opacity: 0.8;
      font-weight: 500;
    }
    .detail-value {
      font-size: 0.9rem;
      color: var(--text-primary);
      font-weight: 600;
    }
    .booking-reference {
      font-family: 'Courier New', monospace;
      background: rgba(0, 229, 255, 0.12);
      padding: 6px 12px;
      border-radius: var(--radius-sm);
      color: var(--neon-cyan);
      border: 1px solid rgba(0, 229, 255, 0.25);
      display: inline-block;
      margin-top: var(--spacing-xs);
      font-size: 0.85rem;
      transition: all 0.3s ease;
    }
    .booking-reference:hover {
      background: rgba(0, 229, 255, 0.2);
      border-color: rgba(0, 229, 255, 0.4);
    }
    
    .booking-card > p {
      margin: var(--spacing-xs) 0;
      font-size: 0.85rem;
      color: var(--text-secondary);
      line-height: 1.5;
    }
    
    .booking-card > div:last-child {
      margin-top: var(--spacing-xs);
      font-size: 0.8rem;
    }
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-secondary);
    }
    .empty-state-icon {
      font-size: 4rem;
      margin-bottom: var(--spacing-md);
      opacity: 0.7;
    }
    .empty-state h3 {
      color: var(--text-primary);
      margin: var(--spacing-md) 0;
      font-size: 1.5rem;
      font-weight: 700;
    }
    .empty-state p {
      color: var(--text-secondary);
      font-size: 1rem;
    }
    .loading {
      text-align: center;
      padding: 40px;
      color: var(--neon-cyan);
      font-size: 1.1rem;
    }
  </style>
</head>
<body class="page-hidden">
  <nav class="arhgo-nav">
    <div class="arhgo-logo">ArhGo</div>
    <ul>
      <li><a data-nav href="index.html#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a data-nav href="hotel.html">Ø§Ù„ÙÙ†Ø§Ø¯Ù‚</a></li>
      <li><a data-nav href="ticket-booking.html">Ø­Ø¬Ø² Ø§Ù„Ø±Ø­Ù„Ø§Øª</a></li>
      <li><a data-nav href="Restuarnt.html">Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</a></li>
      <li><a data-nav href="my-bookings.html" style="color: #37D6C0;">Ø­Ø¬ÙˆØ²Ø§ØªÙŠ</a></li>
    </ul>
    <div class="stack">
      <a class="btn btn-ghost" href="login.html" data-flight-sound id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
      <a class="btn btn-gradient" href="signup.html" data-flight-sound id="signupBtn">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
    </div>
  </nav>
  <main class="page-shell">
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Ø­Ø¬ÙˆØ²Ø§ØªÙŠ</h2>
        <p class="section-subtitle">Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø­Ø¬ÙˆØ²Ø§ØªÙƒ Ù…Ù† Ø§Ù„ÙÙ†Ø§Ø¯Ù‚ ÙˆØ§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ø¬ÙˆÙŠØ©</p>
      </div>

      <div class="bookings-tabs">
        <button class="tab-btn active" data-tab="all">Ø§Ù„ÙƒÙ„</button>
        <button class="tab-btn" data-tab="hotels">Ø§Ù„ÙÙ†Ø§Ø¯Ù‚</button>
        <button class="tab-btn" data-tab="restaurants">Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</button>
        <button class="tab-btn" data-tab="flights">Ø§Ù„Ø±Ø­Ù„Ø§Øª</button>
        <button class="tab-btn" data-tab="plans">Ø®Ø·Ø· Ø§Ù„Ø³ÙØ±</button>
      </div>

      <div id="bookingsContainer" class="grid">
        <div class="loading glass-card" style="text-align: center; padding: 40px;">â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª...</div>
      </div>
    </section>
  </main>

  <script>
    const session_token = localStorage.getItem('session_token');
    const user = JSON.parse(localStorage.getItem('user') || '{}');
    let allBookings = null;
    let currentTab = 'all';

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    if (!session_token) {
      document.getElementById('bookingsContainer').innerHTML = `
        <div class="empty-state">
          <div class="empty-state-icon">ğŸ”’</div>
          <h3>ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
          <p>ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø­Ø¬ÙˆØ²Ø§ØªÙƒ</p>
          <div class="stack" style="margin-top: 24px; justify-content: center;">
            <a href="login.html" class="btn btn-gradient">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
          </div>
        </div>
      `;
    } else {
      // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
      if (user.full_name) {
        document.getElementById('loginBtn').textContent = user.full_name;
        document.getElementById('loginBtn').href = '#';
        document.getElementById('signupBtn').textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';
        document.getElementById('signupBtn').href = '#';
        document.getElementById('signupBtn').onclick = () => {
          localStorage.removeItem('session_token');
          localStorage.removeItem('user');
          window.location.href = 'login.html';
        };
      }
      
      loadBookings();
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentTab = btn.dataset.tab;
        renderBookings();
      });
    });

    async function loadBookings() {
      try {
        const baseUrl = window.location.protocol === 'file:' ? 'http://localhost/ArhGo-trip-planner/' : './';
        const response = await fetch(baseUrl + 'api/get_user_bookings.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ session_token })
        });

        const result = await response.json();

        if (result.success) {
          allBookings = result.data;
          renderBookings();
        } else {
          throw new Error(result.error || 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª');
        }
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª:', error);
        document.getElementById('bookingsContainer').innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">âŒ</div>
            <h3>Ø­Ø¯Ø« Ø®Ø·Ø£</h3>
            <p>${error.message || 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.'}</p>
          </div>
        `;
      }
    }

    function renderBookings() {
      if (!allBookings) return;

      const container = document.getElementById('bookingsContainer');
      let bookings = [];

      // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
      if (currentTab === 'all') {
        bookings = [
          ...allBookings.hotel_bookings.map(b => ({ ...b, type: 'hotel' })),
          ...allBookings.restaurant_bookings.map(b => ({ ...b, type: 'restaurant' })),
          ...allBookings.flight_bookings.map(b => ({ ...b, type: 'flight' })),
          ...allBookings.travel_plans.map(b => ({ ...b, type: 'plan' }))
        ].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
      } else if (currentTab === 'hotels') {
        bookings = allBookings.hotel_bookings.map(b => ({ ...b, type: 'hotel' }));
      } else if (currentTab === 'restaurants') {
        bookings = allBookings.restaurant_bookings.map(b => ({ ...b, type: 'restaurant' }));
      } else if (currentTab === 'flights') {
        bookings = allBookings.flight_bookings.map(b => ({ ...b, type: 'flight' }));
      } else if (currentTab === 'plans') {
        bookings = allBookings.travel_plans.map(b => ({ ...b, type: 'plan' }));
      }

      // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† container Ù„Ø¯ÙŠÙ‡ class grid
      if (!container.classList.contains('grid')) {
        container.classList.add('grid');
      }
      
      if (bookings.length === 0) {
        container.innerHTML = `
          <div class="empty-state glass-card" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
            <div class="empty-state-icon">ğŸ“­</div>
            <h3 style="color: var(--text-primary); margin: var(--spacing-md) 0;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª</h3>
            <p style="color: var(--text-secondary);">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø­Ø¬ÙˆØ²Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù…</p>
          </div>
        `;
        return;
      }

      container.innerHTML = bookings.map(booking => {
        if (booking.type === 'hotel') {
          return renderHotelBooking(booking);
        } else if (booking.type === 'restaurant') {
          return renderRestaurantBooking(booking);
        } else if (booking.type === 'flight') {
          return renderFlightBooking(booking);
        } else if (booking.type === 'plan') {
          return renderTravelPlan(booking);
        }
      }).join('');
    }

    function renderHotelBooking(booking) {
      const statusClass = {
        'Ù…Ø¤ÙƒØ¯Ø©': 'status-confirmed',
        'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±': 'status-pending',
        'Ù…Ù„ØºØ§Ø©': 'status-cancelled',
        'Ù…ÙƒØªÙ…Ù„Ø©': 'status-completed'
      }[booking.status] || 'status-pending';

      return `
        <div class="booking-card">
          <div class="booking-header">
            <h3 class="booking-title">ğŸ¨ ${booking.hotel_name || 'ÙÙ†Ø¯Ù‚'}</h3>
            <span class="booking-status ${statusClass}">${booking.status}</span>
          </div>
          <div class="booking-details">
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ù…ÙˆÙ‚Ø¹</span>
              <span class="detail-value">${booking.hotel_location || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„ÙˆØµÙˆÙ„</span>
              <span class="detail-value">${formatDate(booking.check_in_date)}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©</span>
              <span class="detail-value">${formatDate(booking.check_out_date)}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù</span>
              <span class="detail-value">${booking.rooms}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø¶ÙŠÙˆÙ</span>
              <span class="detail-value">${booking.guests}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
              <span class="detail-value" style="color: #37D6C0;">$${parseFloat(booking.total_price).toFixed(2)}</span>
            </div>
          </div>
          ${booking.special_requests ? `<p style="color: var(--text-secondary); margin-top: var(--spacing-xs); font-size: 0.85rem; line-height: 1.4;"><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${booking.special_requests}</p>` : ''}
          <div class="booking-reference">Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²: ${booking.booking_reference}</div>
          <div style="margin-top: 6px; font-size: 0.75rem; color: var(--text-secondary); opacity: 0.7;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²: ${formatDateTime(booking.created_at)}</div>
        </div>
      `;
    }

    function renderRestaurantBooking(booking) {
      const statusClass = {
        'Ù…Ø¤ÙƒØ¯Ø©': 'status-confirmed',
        'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±': 'status-pending',
        'Ù…Ù„ØºØ§Ø©': 'status-cancelled',
        'Ù…ÙƒØªÙ…Ù„Ø©': 'status-completed'
      }[booking.status] || 'status-pending';

      return `
        <div class="booking-card">
          <div class="booking-header">
            <h3 class="booking-title">ğŸ½ï¸ ${booking.restaurant_name || 'Ù…Ø·Ø¹Ù…'}</h3>
            <span class="booking-status ${statusClass}">${booking.status}</span>
          </div>
          <div class="booking-details">
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ù…ÙˆÙ‚Ø¹</span>
              <span class="detail-value">${booking.restaurant_location || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ù†ÙˆØ¹ Ø§Ù„Ø·Ø¹Ø§Ù…</span>
              <span class="detail-value">${booking.food_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</span>
              <span class="detail-value">${formatDate(booking.booking_date)}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„ÙˆÙ‚Øª</span>
              <span class="detail-value">${booking.booking_time}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ø®Ø§Øµ</span>
              <span class="detail-value">${booking.guests}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
              <span class="detail-value" style="color: #37D6C0;">$${parseFloat(booking.total_price).toFixed(2)}</span>
            </div>
          </div>
          ${booking.special_requests ? `<p style="color: var(--text-secondary); margin-top: var(--spacing-xs); font-size: 0.85rem; line-height: 1.4;"><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${booking.special_requests}</p>` : ''}
          <div class="booking-reference">Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²: ${booking.booking_reference}</div>
          <div style="margin-top: 6px; font-size: 0.75rem; color: var(--text-secondary); opacity: 0.7;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²: ${formatDateTime(booking.created_at)}</div>
        </div>
      `;
    }

    function renderFlightBooking(booking) {
      const statusClass = {
        'Ù…Ø¤ÙƒØ¯Ø©': 'status-confirmed',
        'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±': 'status-pending',
        'Ù…Ù„ØºØ§Ø©': 'status-cancelled',
        'Ù…ÙƒØªÙ…Ù„Ø©': 'status-completed'
      }[booking.status] || 'status-pending';

      return `
        <div class="booking-card">
          <div class="booking-header">
            <h3 class="booking-title">âœˆï¸ Ø±Ø­Ù„Ø© Ø¬ÙˆÙŠØ©</h3>
            <span class="booking-status ${statusClass}">${booking.status}</span>
          </div>
          <div class="booking-details">
            <div class="detail-item">
              <span class="detail-label">Ù…Ù†</span>
              <span class="detail-value">${booking.from_city}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø¥Ù„Ù‰</span>
              <span class="detail-value">${booking.to_city}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©</span>
              <span class="detail-value">${formatDate(booking.departure_date)}</span>
            </div>
            ${booking.return_date ? `
            <div class="detail-item">
              <span class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹ÙˆØ¯Ø©</span>
              <span class="detail-value">${formatDate(booking.return_date)}</span>
            </div>
            ` : ''}
            <div class="detail-item">
              <span class="detail-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§ÙØ±ÙŠÙ†</span>
              <span class="detail-value">${booking.passengers}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ø¯Ø±Ø¬Ø©</span>
              <span class="detail-value">${booking.class_type}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
              <span class="detail-value" style="color: #37D6C0;">$${parseFloat(booking.total_price).toFixed(2)}</span>
            </div>
          </div>
          ${booking.special_requests ? `<p style="color: var(--text-secondary); margin-top: var(--spacing-xs); font-size: 0.85rem; line-height: 1.4;"><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${booking.special_requests}</p>` : ''}
          <div class="booking-reference">Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²: ${booking.booking_reference}</div>
          <div style="margin-top: 6px; font-size: 0.75rem; color: var(--text-secondary); opacity: 0.7;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²: ${formatDateTime(booking.created_at)}</div>
        </div>
      `;
    }

    function renderTravelPlan(booking) {
      return `
        <div class="booking-card">
          <div class="booking-header">
            <h3 class="booking-title">ğŸ—ºï¸ ${booking.plan_name || 'Ø®Ø·Ø© Ø³ÙØ±'}</h3>
          </div>
          <div class="booking-details">
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ø¯ÙˆÙ„Ø©</span>
              <span class="detail-value">${booking.country_name_ar || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
            </div>
            ${booking.city_name_ar ? `
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</span>
              <span class="detail-value">${booking.city_name_ar}</span>
            </div>
            ` : ''}
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ù…Ø¯Ø©</span>
              <span class="detail-value">${booking.duration_days} ÙŠÙˆÙ…</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ù†ÙˆØ¹ Ø§Ù„Ø±Ø­Ù„Ø©</span>
              <span class="detail-value">${booking.trip_type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</span>
              <span class="detail-value">${booking.budget || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©</span>
              <span class="detail-value" style="color: #37D6C0;">$${parseFloat(booking.estimated_cost || 0).toFixed(2)}</span>
            </div>
          </div>
          ${booking.share_link ? `<div class="booking-reference">Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©: ${booking.share_link}</div>` : ''}
          <div style="margin-top: 6px; font-size: 0.75rem; color: var(--text-secondary); opacity: 0.7;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: ${formatDateTime(booking.created_at)}</div>
        </div>
      `;
    }

    function formatDate(dateString) {
      if (!dateString) return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
      const date = new Date(dateString);
      return date.toLocaleDateString('ar-IQ', { year: 'numeric', month: 'long', day: 'numeric' });
    }

    function formatDateTime(dateString) {
      if (!dateString) return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
      const date = new Date(dateString);
      return date.toLocaleString('ar-IQ', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' });
    }
  </script>
</body>
</html>

