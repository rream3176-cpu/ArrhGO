<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArhGo | Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ø­Ù„Ø§Øª</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/arhgo.css">
  <script src="assets/js/arhgo.js" defer></script>
  <style>
    body {
      background: var(--bg-primary);
      padding-top: 80px;
    }
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--spacing-md);
    }
    .flight-card {
      padding: var(--spacing-lg);
      border-radius: var(--radius-lg);
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      -webkit-backdrop-filter: var(--glass-blur);
      border: 1px solid var(--glass-border);
      box-shadow: var(--shadow-card);
      color: var(--text-primary);
    }
    .flight-card h3 {
      margin-bottom: 10px;
      color: var(--neon-cyan);
      font-weight: 600;
    }
  </style>
</head>
<body class="page-hidden">
  <nav class="arhgo-nav">
    <div class="arhgo-logo">ArhGo</div>
    <ul>
      <li><a data-nav href="index.html#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a data-nav href="index.html#features">Ø§Ù„Ù…Ø²Ø§ÙŠØ§</a></li>
      <li><a data-nav href="index.html#planner">Ø®Ø·Ø· Ø±Ø­Ù„ØªÙƒ</a></li>
      <li><a data-nav href="index.html#destinations">Ø§Ù„ÙˆØ¬Ù‡Ø§Øª</a></li>
      <li><a data-nav href="hotel.html">Ø§Ù„ÙÙ†Ø§Ø¯Ù‚</a></li>
      <li><a data-nav href="ticket-booking.html">Ø­Ø¬Ø² Ø§Ù„Ø±Ø­Ù„Ø§Øª</a></li>
      <li><a data-nav href="Restuarnt.html">Ù…Ø·Ø§Ø¹Ù…</a></li>
    </ul>
    <div class="stack">
      <a class="btn btn-ghost" href="login.html" data-flight-sound>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
      <a class="btn btn-gradient" href="signup.html" data-flight-sound>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
    </div>
  </nav>
  <main class="page-shell">
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Ø±Ø­Ù„Ø§Øª Ø¬ÙˆÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡</h2>
        <p class="section-subtitle">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¯Ù† ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®ØŒ ÙˆØ§Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø®Ø§Ø¯Ù… ArhGo Ø§Ù„Ù…Ø­Ù„ÙŠ.</p>
      </div>
      <div class="glass-card">
        <div class="form-grid">
          <input class="arhgo-input" type="text" id="from" placeholder="Ù…Ù† (Ù…Ø«Ø§Ù„: Ø¨ØºØ¯Ø§Ø¯)">
          <input class="arhgo-input" type="text" id="to" placeholder="Ø¥Ù„Ù‰ (Ù…Ø«Ø§Ù„: Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„)">
          <input class="arhgo-input" type="date" id="date">
        </div>
        <div class="stack" style="margin-top:18px;justify-content:flex-end;">
          <button class="btn btn-gradient" id="searchFlights">Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±Ø­Ù„Ø§Øª</button>
          <a class="btn btn-ghost" href="test.html" data-flight-sound>Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        </div>
      </div>
      <div id="flights" class="section" style="padding:0;margin-top:30px;">âœˆï¸ Ø£Ø¯Ø®Ù„ Ø§Ù„ÙˆØ¬Ù‡Ø§Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ø¶ØºØ· Ø¨Ø­Ø«</div>
    </section>
  </main>

  <script>
    const flightsDiv = document.getElementById('flights');
    document.getElementById('searchFlights').addEventListener('click', async () => {
      const from = document.getElementById('from').value.trim();
      const to = document.getElementById('to').value.trim();
      const date = document.getElementById('date').value;
      if (!from || !to || !date) {
        flightsDiv.innerHTML = "<div class='glass-card'>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.</div>";
        return;
      }
      flightsDiv.innerHTML = "<div class='glass-card'>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±Ø­Ù„Ø§Øª...</div>";
      try {
        const res = await fetch('http://localhost:5002/get-flights', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ from, to, date })
        });
        const data = await res.json();
        if (data.flights && data.flights.length > 0) {
          flightsDiv.innerHTML = data.flights.map(buildFlightCard).join('');
        } else {
          flightsDiv.innerHTML = "<div class='glass-card'>ğŸš« Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø­Ù„Ø§Øª Ù…ØªÙˆÙØ±Ø©.</div>";
        }
      } catch (err) {
        flightsDiv.innerHTML = "<div class='glass-card'>Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.</div>";
        console.error(err);
      }
    });

    const buildFlightCard = (flight) => `
      <article class="flight-card">
        <h3>${flight.from_city} â†’ ${flight.to_city}</h3>
        <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${flight.flight_date?.split('T')[0] || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
        <p>Ø§Ù„Ø³Ø¹Ø±: $${flight.price || '--'}</p>
        <p>Ø§Ù„ÙØ¦Ø©: ${flight.flight_class || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©'}</p>
        <p>Ø§Ù„Ø´Ø±ÙƒØ©: ${flight.airline || 'â€”'}</p>
      </article>
    `;
  </script>
</body>
</html>

